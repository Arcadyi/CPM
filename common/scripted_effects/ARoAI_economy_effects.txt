
### CHECK IF IDENTIFYING OBJECT LIST IS CORRECT, (RE)CREATE IT IF IT'S NOT

ec_check_building_type_array = {
	if = {
		limit = {
			ec_building_type_array_is_correct = no
		}
		ec_clear_building_type_array = yes
		ec_create_building_type_array = yes
	}
}

ec_clear_building_type_array = {
	clear_global_variable_list = ecbta
	every_state_region = {
		if = {
			limit = {
				has_variable = ecbtn
			}
			remove_variable = ecbtn
		}
		if = {
			limit = {
				has_variable = ecbtp
			}
			remove_variable = ecbtp
		}
		if = {
			limit = {
				has_variable = ecbtc
			}
			remove_variable = ecbtc
		}
		if = {
			limit = {
				has_variable = ecbta
			}
			remove_variable = ecbta
		}
	}
}

### COLLECT INFORMATION ON ARABLE RESOURCES

ec_collect_arable_resources = {
	if = {
		limit = {
			NOT = {
				has_global_variable = ec_collect_arable_resources
			}
		}
		set_global_variable = {
			name = ec_collect_arable_resources
			value = 1
		}
		ec_collect_existing_arables = yes
	}
	else_if = {
		limit = {
			global_var:ec_collect_arable_resources < 3
		}
		trigger_event = {
			id = ARoAI_economy_events.300
			days = 2
		}
	}
}

### APPLY CONSTRUCTION HANDICAP

ec_apply_construction_buffs = {
	if = {
		limit = {
			is_player = no
		}
		if = {
			limit = {
				OR = {
					market.owner = {
						is_player = no
					}
					has_game_rule = ec_subject_construction_same
				}
			}
			if = {
				limit = {
					has_game_rule = ec_construction_points_110
				}
				gb_renew_modifier = {
					name = ec_10_percent_accelerated_construction
					days = 35
				}
			}
			else_if = {
				limit = {
					has_game_rule = ec_construction_points_120
				}
				gb_renew_modifier = {
					name = ec_20_percent_accelerated_construction
					days = 35
				}
			}
			else_if = {
				limit = {
					has_game_rule = ec_construction_points_130
				}
				gb_renew_modifier = {
					name = ec_30_percent_accelerated_construction
					days = 35
				}
			}
			else_if = {
				limit = {
					has_game_rule = ec_construction_points_140
				}
				gb_renew_modifier = {
					name = ec_40_percent_accelerated_construction
					days = 35
				}
			}
			else_if = {
				limit = {
					has_game_rule = ec_construction_points_150
				}
				gb_renew_modifier = {
					name = ec_50_percent_accelerated_construction
					days = 35
				}
			}
		}
		else_if = {
			limit = {
				market.owner = {
					is_player = yes
				}
				NOT = {
					has_game_rule = ec_subject_construction_same
				}
			}
			if = {
				limit = {
					has_game_rule = ec_subject_construction_110
				}
				gb_renew_modifier = {
					name = ec_10_percent_accelerated_construction
					days = 35
				}
			}
			else_if = {
				limit = {
					has_game_rule = ec_subject_construction_120
				}
				gb_renew_modifier = {
					name = ec_20_percent_accelerated_construction
					days = 35
				}
			}
			else_if = {
				limit = {
					has_game_rule = ec_subject_construction_130
				}
				gb_renew_modifier = {
					name = ec_30_percent_accelerated_construction
					days = 35
				}
			}
			else_if = {
				limit = {
					has_game_rule = ec_subject_construction_140
				}
				gb_renew_modifier = {
					name = ec_40_percent_accelerated_construction
					days = 35
				}
			}
			else_if = {
				limit = {
					has_game_rule = ec_subject_construction_150
				}
				gb_renew_modifier = {
					name = ec_50_percent_accelerated_construction
					days = 35
				}
			}
		}
	}
}

### COLLECT INFORMATION ON CONSCRIPTION CENTERS

ec_calculate_army_size = {
	if = {
		limit = {
			NOT = {
				has_global_variable = ec_calculated_army_size
			}
		}
		set_global_variable = {
			name = ec_calculated_army_size
			value = 1
		}
		every_country = {
			limit = {
				ec_country_allowed = yes
			}
			set_variable = {
				name = ec_barracks_count
				value = 0
			}
			set_variable = {
				name = ec_conscription_center_count
				value = 0
			}
			save_temporary_scope_as = ec_current_country
			every_scope_building = {
				if = {
					limit = {
						is_building_type = building_barracks
					}
					scope:ec_current_country = {
						change_variable = {
							name = ec_barracks_count
							add = prev.level
						}
					}
				}
				else_if = {
					limit = {
						is_building_type = building_conscription_center
					}
					scope:ec_current_country = {
						change_variable = {
							name = ec_conscription_center_count
							add = prev.level
						}
					}
				}
			}
		}
	}
	else = {
		set_variable = {
			name = ec_barracks_count
			value = 0
		}
		set_variable = {
			name = ec_conscription_center_count
			value = 0
		}
		every_scope_building = {
			if = {
				limit = {
					is_building_type = building_barracks
				}
				root = {
					change_variable = {
						name = ec_barracks_count
						add = prev.level
					}
				}
			}
			else_if = {
				limit = {
					is_building_type = building_conscription_center
				}
				root = {
					change_variable = {
						name = ec_conscription_center_count
						add = prev.level
					}
				}
			}
		}
	}
}

### CALCULATE INCORPORATED POPULATION

ec_calculate_incorporated_population = {
	set_variable = {
		name = ec_incorporated_population
		value = 0
	}
	set_variable = {
		name = ec_total_coastal_population
		value = 0
	}
	set_variable = {
		name = ec_incorporated_coastal_population
		value = 0
	}
	set_variable = {
		name = ec_incorporated_gdp
		value = 0
	}
	every_scope_state = {
		if = {
			limit = {
				is_incorporated = yes
			}
			root = {
				change_variable = {
					name = ec_incorporated_population
					add = prev.state_population
				}
				change_variable = {
					name = ec_incorporated_gdp
					add = prev.gdp
				}
			}
		}
		if = {
			limit = {
				is_coastal = yes
			}
			root = {
				change_variable = {
					name = ec_total_coastal_population
					add = prev.state_population
				}
			}
			if = {
				limit = {
					is_incorporated = yes
				}
				root = {
					change_variable = {
						name = ec_incorporated_coastal_population
						add = prev.state_population
					}
				}
			}
		}
		else_if = {
			limit = {
				incorporation_progress > 0
			}
			root = {
				change_variable = {
					name = ec_incorporated_population
					add = {
						value = prev.state_population
						multiply = prev.incorporation_progress
					}
				}
				change_variable = {
					name = ec_incorporated_gdp
					add = {
						value = prev.gdp
						multiply = prev.incorporation_progress
					}
				}
			}
			if = {
				limit = {
					is_coastal = yes
				}
				root = {
					change_variable = {
						name = ec_incorporated_coastal_population
						add = {
							value = prev.state_population
							multiply = prev.incorporation_progress
						}
					}
				}
			}
		}
	}
}

### CALCULATE COUNTRY WEEKLY INCOME

ec_calculate_country_budget_surplus = {
	if = {
		limit = {
			has_variable = ec_country_previous_treasury
			NOR = {
				ec_country_current_treasury >= ec_95_percent_of_gold_reserves_limit
				var:ec_country_previous_treasury >= ec_95_percent_of_gold_reserves_limit
				ec_country_current_treasury < ec_95_percent_of_credit
				var:ec_country_previous_treasury < ec_95_percent_of_credit
			}
		}
		set_variable = {
			name = ec_country_budget_surplus
			value = {
				value = ec_country_current_treasury
				subtract = var:ec_country_previous_treasury
				divide = 4.35
				add = {
					value = var:ec_construction_sector_expenses
					divide = var:ec_checks_of_building_costs
				}
				subtract = ec_construction_sector_costs_value
			}
		}
	}
	else = {
		set_variable = {
			name = ec_country_budget_surplus
			value = {
				if = {
					limit = {
						has_variable = ec_checks_of_building_costs
						var:ec_checks_of_building_costs > 0
						has_variable = ec_total_building_expenses
						var:ec_total_building_expenses > 0
						has_variable = ec_construction_sector_expenses
						var:ec_construction_sector_expenses > 0
					}
					value = income
					subtract = {
						value = var:ec_total_building_expenses
						divide = {
							value = var:ec_checks_of_building_costs
							min = 1
						}
					}
					if = {
						limit = {
							is_non_customs_union_subject = yes
						}
						add = weekly_net_fixed_income
						subtract = {
							value = var:ec_construction_sector_expenses
							divide = var:ec_checks_of_building_costs
							multiply = 0.80
						}
						divide = 2
					}
				}
				else = {
					value = weekly_net_fixed_income
					if = {
						limit = {
							has_variable = ec_checks_of_building_costs
							var:ec_checks_of_building_costs > 0
							has_variable = ec_construction_sector_expenses
							var:ec_construction_sector_expenses > 0
						}
						subtract = {
							value = var:ec_construction_sector_expenses
							divide = var:ec_checks_of_building_costs
							multiply = 0.80
						}
					}
				}
			}
		}
	}
	set_variable = {
		name = ec_country_previous_treasury
		value = ec_country_current_treasury
	}
}

### COLLECT BUDGET COSTS SUCH AS CONSTRUCTION AND MILITARY

ec_collect_budget_costs = {
	
	# Set up estimate variables
	
	set_variable = {
		name = ec_government_administration_estimate
		value = 0
	}
	set_variable = {
		name = ec_construction_sector_estimate
		value = 0
	}
	set_variable = {
		name = ec_university_estimate
		value = 0
	}
	set_variable = {
		name = ec_port_estimate
		value = 0
	}
	set_variable = {
		name = ec_barracks_estimate
		value = 0
	}
	set_variable = {
		name = ec_naval_base_estimate
		value = 0
	}
	
	# Collect expenses data from buildings
	
	every_scope_building = {
		if = {
			limit = {
				is_building_type = building_government_administration
			}
			root = {
				change_variable = {
					name = ec_government_administration_estimate
					subtract = prev.weekly_profit
				}
			}
		}
		else_if = {
			limit = {
				is_building_type = building_construction_sector
			}
			root = {
				change_variable = {
					name = ec_construction_sector_estimate
					subtract = prev.weekly_profit
				}
			}
		}
		else_if = {
			limit = {
				is_building_type = building_university
			}
			root = {
				change_variable = {
					name = ec_university_estimate
					subtract = prev.weekly_profit
				}
			}
		}
		else_if = {
			limit = {
				is_building_type = building_port
			}
			root = {
				change_variable = {
					name = ec_port_estimate
					subtract = prev.weekly_profit
				}
			}
		}
		else_if = {
			limit = {
				is_building_type = building_barracks
			}
			root = {
				change_variable = {
					name = ec_barracks_estimate
					subtract = prev.weekly_profit
				}
			}
		}
		else_if = {
			limit = {
				is_building_type = building_naval_base
			}
			root = {
				change_variable = {
					name = ec_naval_base_estimate
					subtract = prev.weekly_profit
				}
			}
		}
	}
	
	# Track amount of checks in this cycle
	
	if = {
		limit = {
			NOT = {
				has_variable = ec_checks_of_building_costs
			}
		}
		set_variable = {
			name = ec_checks_of_building_costs
			value = 0
		}
	}
	change_variable = {
		name = ec_checks_of_building_costs
		add = 1
	}
	
	# Write real amount of money spent into total variable
	
	if = {
		limit = {
			NOT = {
				has_variable = ec_total_building_expenses
			}
		}
		set_variable = {
			name = ec_total_building_expenses
			value = 0
		}
	}
	change_variable = {
		name = ec_total_building_expenses
		add = {
			value = var:ec_government_administration_estimate
			add = var:ec_construction_sector_estimate
			add = var:ec_university_estimate
			add = var:ec_port_estimate
			add = var:ec_barracks_estimate
			add = var:ec_naval_base_estimate
		}
	}
	
	# Calculate money spent per construction point from sectors
	
	if = {
		limit = {
			NOT = {
				has_variable = ec_construction_sector_per_point_costs
			}
		}
		set_variable = {
			name = ec_construction_sector_per_point_costs
			value = 0
		}
	}
	if = {
		limit = {
			OR = {
				var:ec_construction_sector_estimate = 0
				ec_construction_points_from_sectors_current = 0
				ec_usage_of_construction_points_from_sectors_percent = 0
			}
		}
		if = {
			limit = {
				var:ec_construction_sector_per_point_costs > 0
			}
			set_variable = {
				name = ec_construction_sector_per_point_estimate
				value = {
					value = var:ec_construction_sector_per_point_costs
					divide = var:ec_checks_of_building_costs
				}
			}
		}
		else_if = {
			limit = {
				has_variable = ec_construction_sector_per_point_previous
				var:ec_construction_sector_per_point_previous > 0
			}
			set_variable = {
				name = ec_construction_sector_per_point_estimate
				value = var:ec_construction_sector_per_point_previous
			}
		}
	}
	else = {
		set_variable = {
			name = ec_construction_sector_per_point_estimate
			value = {
				value = {
					value = var:ec_construction_sector_estimate
					multiply = {
						value = {
							value = 4
							multiply = ec_usage_of_construction_points_from_sectors_percent
						}
						divide = {
							value = 4
							multiply = ec_usage_of_construction_points_from_sectors_percent
							add = 1
						}
					}
					divide = ec_usage_of_construction_points_from_sectors_percent
				}
				add = {
					value = var:ec_construction_sector_estimate
					multiply = {
						value = 1
						divide = {
							value = 4
							multiply = ec_usage_of_construction_points_from_sectors_percent
							add = 1
						}
					}
					divide = {
						value = 1
						add = modifier:country_government_wages_mult
					}
				}
				divide = ec_construction_points_from_sectors_current
			}
		}
	}
	if = {
		limit = {
			NOT = {
				has_variable = ec_construction_sector_per_point_estimate
			}
		}
		set_variable = {
			name = ec_construction_sector_per_point_estimate
			value = 0
		}
	}
	if = {
		limit = {
			var:ec_construction_sector_per_point_estimate > 0
		}
		if = {
			limit = {
				has_variable = ec_construction_sector_per_point_previous
				var:ec_construction_sector_per_point_previous > 0
			}
			change_variable = {
				name = ec_construction_sector_per_point_estimate
				add = var:ec_construction_sector_per_point_previous
			}
			change_variable = {
				name = ec_construction_sector_per_point_estimate
				divide = 2
			}
		}
		set_variable = {
			name = ec_construction_sector_per_point_previous
			value = var:ec_construction_sector_per_point_estimate
		}
	}
	if = {
		limit = {
			var:ec_construction_sector_per_point_costs = 0
		}
		change_variable = {
			name = ec_construction_sector_per_point_costs
			add = {
				value = var:ec_construction_sector_per_point_estimate
				multiply = var:ec_checks_of_building_costs
			}
		}
	}
	else = {
		change_variable = {
			name = ec_construction_sector_per_point_costs
			add = var:ec_construction_sector_per_point_estimate
		}
	}
	remove_variable = ec_construction_sector_per_point_estimate
	
	# Correct costs with wage modifiers
	
	if = {
		limit = {
			NOT = {
				modifier:country_government_wages_mult = 0.00
			}
		}
		change_variable = {
			name = ec_government_administration_estimate
			divide = {
				value = 1
				add = {
					value = modifier:country_government_wages_mult
					multiply = 0.80
				}
			}
		}
		change_variable = {
			name = ec_university_estimate
			divide = {
				value = 1
				add = {
					value = modifier:country_government_wages_mult
					multiply = 0.95
				}
			}
		}
		change_variable = {
			name = ec_port_estimate
			divide = {
				value = 1
				add = {
					value = modifier:country_government_wages_mult
					multiply = 0.75
				}
			}
		}
	}
	if = {
		limit = {
			NOT = {
				modifier:country_military_wages_mult = 0.00
			}
		}
		change_variable = {
			name = ec_barracks_estimate
			divide = {
				value = 1
				add = {
					value = modifier:country_military_wages_mult
					multiply = 0.60
				}
			}
		}
		change_variable = {
			name = ec_naval_base_estimate
			divide = {
				value = 1
				add = {
					value = modifier:country_military_wages_mult
					multiply = 0.60
				}
			}
		}
	}
	
	ec_add_estimate_to_record = {
		item = government_administration
		type = costs
	}
	ec_add_estimate_to_record = {
		item = construction_sector
		type = expenses
	}
	ec_add_estimate_to_record = {
		item = university
		type = costs
	}
	ec_add_estimate_to_record = {
		item = port
		type = costs
	}
	ec_add_estimate_to_record = {
		item = barracks
		type = costs
	}
	ec_add_estimate_to_record = {
		item = naval_base
		type = costs
	}
}

ec_add_estimate_to_record = {
	if = {
		limit = {
			NOT = {
				has_variable = ec_$item$_$type$
			}
		}
		set_variable = {
			name = ec_$item$_$type$
			value = 0
		}
	}
	if = {
		limit = {
			var:ec_$item$_$type$ = 0
		}
		change_variable = {
			name = ec_$item$_$type$
			add = {
				value = var:ec_$item$_estimate
				multiply = var:ec_checks_of_building_costs
			}
		}
	}
	else_if = {
		limit = {
			var:ec_$item$_estimate = 0
		}
		set_variable = {
			name = ec_$item$_$type$
			value = 0
		}
	}
	else = {
		change_variable = {
			name = ec_$item$_$type$
			add = var:ec_$item$_estimate
		}
	}
	remove_variable = ec_$item$_estimate
}

### CLEAR BUDGET COSTS VARIABLES

ec_clear_budget_cost_variables = {
	remove_variable = ec_checks_of_building_costs
	remove_variable = ec_total_building_expenses
	remove_variable = ec_construction_sector_per_point_costs
	remove_variable = ec_government_administration_costs
	remove_variable = ec_construction_sector_expenses
	remove_variable = ec_university_costs
	remove_variable = ec_port_costs
	remove_variable = ec_barracks_costs
	remove_variable = ec_naval_base_costs
}

### CHANGE TAX LEVEL AND GOVERNMENT WAGES

ec_change_budget_settings = {
	if = {
		limit = {
			has_variable = ec_country_budget_surplus
			is_player = no
		}
		
		# Budget is above neutral
		
		if = {
			limit = {
				ec_budget_health = {
					level = 0
				}
			}
			
			# Raise wages
			
			if = {
				limit = {
					OR = {
						tax_level = very_low
						tax_level = low
						tax_level = medium
						tax_level = high
					}
				}
				if = {
					limit = {
						ec_government_wages_are_very_low = yes
					}
					set_government_wage_level = low
				}
				else_if = {
					limit = {
						ec_government_wages_are_low = yes
					}
					set_government_wage_level = medium
				}
				else_if = {
					limit = {
						ec_budget_health = {
							level = 1
						}
						OR = {
							tax_level = very_low
							tax_level = low
						}
					}
					if = {
						limit = {
							ec_government_wages_are_medium = yes
						}
						set_government_wage_level = high
					}
					else_if = {
						limit = {
							ec_government_wages_are_high = yes
						}
						set_government_wage_level = very_high
					}
				}
				if = {
					limit = {
						ec_military_wages_are_very_low = yes
					}
					set_military_wage_level = low
				}
				else_if = {
					limit = {
						ec_military_wages_are_low = yes
					}
					set_military_wage_level = medium
				}
				else_if = {
					limit = {
						ec_budget_health = {
							level = 1
						}
						OR = {
							tax_level = very_low
							tax_level = low
						}
					}
					if = {
						limit = {
							ec_military_wages_are_medium = yes
						}
						set_military_wage_level = high
					}
					else_if = {
						limit = {
							ec_military_wages_are_high = yes
						}
						set_military_wage_level = very_high
					}
				}
			}
			
			# Lower taxes
			
			if = {
				limit = {
					tax_level = very_high
				}
				set_tax_level = high
			}
			else_if = {
				limit = {
					ec_budget_health = {
						level = 1
					}
				}
				if = {
					limit = {
						tax_level = high
					}
					set_tax_level = medium
				}
				else_if = {
					limit = {
						tax_level = medium
					}
					set_tax_level = low
				}
				else_if = {
					limit = {
						tax_level = low
						ec_government_wages_are_very_high = yes
						ec_military_wages_are_very_high = yes
					}
					set_tax_level = very_low
				}
			}
		}
		
		# Budget is below neutral
		
		else = {
			
			# Raise taxes
			
			if = {
				limit = {
					tax_level = very_low
				}
				set_tax_level = low
			}
			
			# Lower wages
			
			else_if = {
				limit = {
					OR = {
						ec_government_wages_are_very_high = yes
						ec_military_wages_are_very_high = yes
					}
				}
				set_government_wage_level = high
				set_military_wage_level = high
			}
			else_if = {
				limit = {
					OR = {
						ec_government_wages_are_high = yes
						ec_military_wages_are_high = yes
					}
				}
				set_government_wage_level = medium
				set_military_wage_level = medium
			}
			else = {
			
				# Lower wages
				
				if = {
					limit = {
						ec_budget_health = {
							level = -2
						}
						OR = {
							tax_level = high
							tax_level = very_high
						}
					}
					if = {
						limit = {
							OR = {
								ec_government_wages_are_very_low = yes
								ec_can_cut_government_wages = yes
							}
						}
						set_government_wage_level = low
					}
					if = {
						limit = {
							OR = {
								ec_military_wages_are_very_low = yes
								ec_can_cut_military_wages = yes
							}
						}
						set_military_wage_level = low
					}
				}
				else_if = {
					limit = {
						NOT = {
							ec_budget_health = {
								level = -2
							}
						}
						OR = {
							tax_level = high
							tax_level = very_high
						}
					}
					if = {
						limit = {
							ec_can_cut_government_wages = yes
						}
						set_government_wage_level = very_low
					}
					if = {
						limit = {
							ec_can_cut_military_wages = yes
						}
						set_military_wage_level = very_low
					}
				}
				
				# Force military wages when in conflict
				
				if = {
					limit = {
						ec_is_using_military_forces = yes
					}
					set_military_wage_level = medium
				}
				
				# Raise taxes
				
				if = {
					limit = {
						ec_budget_health = {
							level = -3
						}
						OR = {
							tax_level = very_low
							tax_level = low
							tax_level = medium
						}
					}
					if = {
						limit = {
							tax_level = very_low
						}
						set_tax_level = low
					}
					else_if = {
						limit = {
							tax_level = low
						}
						set_tax_level = medium
					}
					else_if = {
						limit = {
							tax_level = medium
						}
						set_tax_level = high
					}
				}
				else_if = {
					limit = {
						NOT = {
							ec_budget_health = {
								level = -3
							}
						}
						OR = {
							tax_level = very_low
							tax_level = low
							tax_level = medium
							tax_level = high
						}
					}
					set_tax_level = very_high
				}
			}
		}
	}
}

ec_check_wartime_spending = {
	if = {
		limit = {
			ec_is_using_military_forces = yes
		}
		gb_renew_variable = {
			name = ec_wartime_spending
			days = 42
		}
	}
}

### ADDITIONAL CALCULATIONS THAT ARE REQUIRED FOR SCRIPT FUNCTIONING

ec_preliminary_calculations = {
	
	# Square root of millions of incorporated population
	
	set_variable = {
		name = csr_input
		value = {
			value = var:ec_incorporated_population
			divide = 1000000
		}
	}
	round_variable = {
		name = csr_input
		nearest = 0.1
	}
	set_variable = {
		name = csr_root
		value = 0.1
	}
	gb_calculate_square_root = yes
	set_variable = {
		name = ec_square_root_of_incorporated_population
		value = var:csr_output
	}
	remove_variable = csr_output
	
	# Square root of millions of GDP
	
	set_variable = {
		name = csr_input
		value = {
			value = gdp
			divide = 1000000
		}
	}
	round_variable = {
		name = csr_input
		nearest = 0.1
	}
	set_variable = {
		name = csr_root
		value = 0.1
	}
	gb_calculate_square_root = yes
	set_variable = {
		name = ec_square_root_of_gdp
		value = var:csr_output
	}
	remove_variable = csr_output
	
	# Square root of GDP per capita
	
	set_variable = {
		name = csr_input
		value = {
			value = gdp
			divide = {
				value = total_population
				min = 1
			}
		}
	}
	round_variable = {
		name = csr_input
		nearest = 0.1
	}
	set_variable = {
		name = csr_root
		value = 0.1
	}
	gb_calculate_precise_square_root = yes
	set_variable = {
		name = ec_square_root_of_gdp_per_capita
		value = var:csr_output
	}
	remove_variable = csr_output
	
	# Square root of incorporated GDP per capita
	
	set_variable = {
		name = csr_input
		value = {
			value = var:ec_incorporated_gdp
			divide = {
				value = var:ec_incorporated_population
				min = 1
			}
		}
	}
	round_variable = {
		name = csr_input
		nearest = 0.1
	}
	set_variable = {
		name = csr_root
		value = 0.1
	}
	gb_calculate_precise_square_root = yes
	set_variable = {
		name = ec_square_root_of_incorporated_gdp_per_capita
		value = var:csr_output
	}
	remove_variable = csr_output
	
	# Square root of minus half unincorporated GDP per capita
	
	set_variable = {
		name = csr_input
		value = {
			value = ec_minus_half_unincorporated_gdp
			divide = {
				value = ec_minus_half_unincorporated_population
				min = 1
			}
		}
	}
	round_variable = {
		name = csr_input
		nearest = 0.1
	}
	set_variable = {
		name = csr_root
		value = 0.1
	}
	gb_calculate_precise_square_root = yes
	set_variable = {
		name = ec_square_root_of_minus_half_unincorporated_gdp_per_capita
		value = var:csr_output
	}
	remove_variable = csr_output
	
	# Square root of construction points
	
	set_variable = {
		name = csr_input
		value = ec_construction_points_current
	}
	round_variable = {
		name = csr_input
		nearest = 1
	}
	set_variable = {
		name = csr_root
		value = 1
	}
	gb_calculate_square_root = yes
	set_variable = {
		name = ec_square_root_of_construction_points
		value = var:csr_output
	}
	remove_variable = csr_output
	
	# Target surplus of bureaucracy
	
	set_variable = {
		name = ec_incorporation_bureaucracy_cost
		value = 0
	}
	every_scope_state = {
		limit = {
			is_incorporated = no
			incorporation_progress <= 0
		}
		if = {
			limit = {
				root.var:ec_incorporation_bureaucracy_cost < state_population
			}
			root = {
				set_variable = {
					name = ec_incorporation_bureaucracy_cost
					value = prev.state_population
				}
			}
		}
	}
	change_variable = {
		name = ec_incorporation_bureaucracy_cost
		divide = 5000
	}
	if = {
		limit = {
			var:ec_incorporation_bureaucracy_cost > ec_institution_bureaucracy_cost
		}
		set_variable = {
			name = ec_surplus_bureaucracy_target
			value = var:ec_incorporation_bureaucracy_cost
		}
	}
	else = {
		set_variable = {
			name = ec_surplus_bureaucracy_target
			value = ec_institution_bureaucracy_cost
		}
	}
	remove_variable = ec_incorporation_bureaucracy_cost
	
	######
	
	set_variable = {
		name = ec_average_army_threat
		value = 0
	}
	set_variable = {
		name = ec_average_navy_threat
		value = 0
	}
	set_variable = {
		name = ec_biggest_army_threat
		value = 0
	}
	set_variable = {
		name = ec_biggest_navy_threat
		value = 0
	}
	ordered_country = {
		order_by = ec_army_power_projection_with_conscription
		max = 6
		root = {
			change_variable = {
				name = ec_average_army_threat
				add = prev.ec_army_power_projection_with_conscription
			}
		}
		if = {
			limit = {
				NOT = {
					this = root
				}
				root.var:ec_biggest_army_threat < ec_army_power_projection_with_conscription
			}
			root = {
				set_variable = {
					name = ec_biggest_army_threat
					value = prev.ec_army_power_projection_with_conscription
				}
			}
		}
	}
	ordered_country = {
		order_by = ec_navy_power_projection
		max = 6
		root = {
			change_variable = {
				name = ec_average_navy_threat
				add = prev.ec_navy_power_projection
			}
		}
		if = {
			limit = {
				NOT = {
					this = root
				}
				root.var:ec_biggest_navy_threat < ec_navy_power_projection
			}
			root = {
				set_variable = {
					name = ec_biggest_navy_threat
					value = prev.ec_navy_power_projection
				}
			}
		}
	}
	change_variable = {
		name = ec_average_army_threat
		divide = 6
	}
	change_variable = {
		name = ec_average_navy_threat
		divide = 6
	}
	
	set_variable = {
		name = ec_army_size_equal_to_average_threat
		value = {
			value = var:ec_average_army_threat
			if = {
				limit = {
					has_variable = ec_barracks_count
					var:ec_barracks_count > 0
					ec_army_power_projection > 0
				}
				subtract = ec_conscription_power_projection
				divide = {
					value = ec_army_power_projection
					divide = var:ec_barracks_count
				}
			}
		}
	}
	remove_variable = ec_average_army_threat
	set_variable = {
		name = ec_army_size_equal_to_biggest_threat
		value = {
			value = var:ec_biggest_army_threat
			if = {
				limit = {
					has_variable = ec_barracks_count
					var:ec_barracks_count > 0
					ec_army_power_projection > 0
				}
				subtract = ec_conscription_power_projection
				divide = {
					value = ec_army_power_projection
					divide = var:ec_barracks_count
				}
			}
		}
	}
	remove_variable = ec_biggest_army_threat
	set_variable = {
		name = ec_navy_size_equal_to_average_threat
		value = {
			value = var:ec_average_navy_threat
			if = {
				limit = {
					navy_size > 0
					ec_navy_power_projection > 0
				}
				divide = {
					value = ec_navy_power_projection
					divide = navy_size
				}
			}
		}
	}
	remove_variable = ec_average_navy_threat
	set_variable = {
		name = ec_navy_size_equal_to_biggest_threat
		value = {
			value = var:ec_biggest_navy_threat
			if = {
				limit = {
					navy_size > 0
					ec_navy_power_projection > 0
				}
				divide = {
					value = ec_navy_power_projection
					divide = navy_size
				}
			}
		}
	}
	remove_variable = ec_biggest_navy_threat
	
	if = {
		limit = {
			is_player = no
			has_game_rule = ec_building_priorities_roleplay
		}
		if = {
			limit = {
				NOT = {
					market.owner = this
				}
			}
			if = {
				limit = {
					ec_gdp_per_capita < 4
				}
				set_variable = {
					name = ec_resource_offset_country_factor
					value = -1
				}
				set_variable = {
					name = ec_arable_offset_country_factor
					value = -1
				}
			}
			set_variable = {
				name = ec_industry_offset_country_factor
				value = 2
			}
		}
		else_if = {
			limit = {
				OR = {
					has_law = law_type:law_traditionalism
					AND = {
						country_rank <= 3
						ec_gdp_per_capita < 4
					}
				}
			}
			set_variable = {
				name = ec_resource_offset_country_factor
				value = 1
			}
			set_variable = {
				name = ec_arable_offset_country_factor
				value = -1
			}
			set_variable = {
				name = ec_industry_offset_country_factor
				value = 2
			}
		}
		else_if = {
			limit = {
				OR = {
					has_law = law_type:law_agrarianism
					AND = {
						country_rank <= 3
						ec_gdp_per_capita < 8
					}
					AND = {
						country_rank <= 5
						ec_gdp_per_capita < 4
					}
				}
			}
			set_variable = {
				name = ec_arable_offset_country_factor
				value = -1
			}
			set_variable = {
				name = ec_industry_offset_country_factor
				value = 1
			}
		}
	}
}

### UPDATE COASTLINE OF MARKET CAPITAL

ec_update_coastline_of_market_capital = {
	while = {
		limit = {
			any_in_list = {
				variable = ec_coastline_of_market_capital
				any_neighbouring_state = {
					owner = root
					is_coastal = yes
					NOT = {
						root = {
							is_target_in_variable_list = {
								name = ec_coastline_of_market_capital
								target = prev
							}
						}
					}
				}
			}
		}
		every_in_list = {
			variable = ec_coastline_of_market_capital
			every_neighbouring_state = {
				limit = {
					owner = root
					is_coastal = yes
					NOT = {
						root = {
							is_target_in_variable_list = {
								name = ec_coastline_of_market_capital
								target = prev
							}
						}
					}
				}
				root = {
					add_to_variable_list = {
						name = ec_coastline_of_market_capital
						target = prev
					}
				}
			}
		}
	}
}

### COLLECTING ALL THE STATE LEVEL DATA REQUIRED FOR THE SCRIPT

ec_collect_state_level_data = {
	
	# Set up country level counters of government building
	
	set_variable = {
		name = ec_government_administration_count
		value = 0
	}
	set_variable = {
		name = ec_construction_sector_count
		value = 0
	}
	set_variable = {
		name = ec_university_count
		value = 0
	}
	set_variable = {
		name = ec_railway_count
		value = 0
	}
	set_variable = {
		name = ec_port_count
		value = 0
	}
	#set_variable = {
	#	name = ec_barracks_count
	#	value = 0
	#}
	set_variable = {
		name = ec_naval_base_count
		value = 0
	}
	
	# Calculate free workforce that is available in the state
	
	every_scope_state = {
		set_variable = {
			name = ec_available_workforce
			value = ec_unemployed_population
		}
		if = {
			limit = {
				any_scope_pop = {
					is_pop_type = peasants
					OR = {
						pop_employment_building_group =	bg_subsistence_agriculture
						pop_employment_building_group =	bg_subsistence_ranching
					}
				}
			}
			save_temporary_scope_as = ec_current_state
			every_scope_building = {
				limit = {
					is_subsistence_building = yes
				}
				scope:ec_current_state = {
					change_variable = {
						name = ec_available_workforce
						add = {
							value = prev.level
							multiply = 4500
							multiply = prev.occupancy
						}
					}
				}
			}
		}
	}
	
	# Collect country level excess production
	
	if = {
		limit = {
			any_scope_state = {
				ec_available_workforce < ec_sufficient_workforce
				percent >= 0.50
			}
		}
		set_variable = ec_check_excessive_production
		ec_check_excessive_production = yes
	}
	
	# Prepare closest coastline states of market capital
	
	if = {
		limit = {
			root.market.owner = root
		}
		root.market_capital = {
			if = {
				limit = {
					is_coastal = yes
				}
				root = {
					add_to_variable_list = {
						name = ec_coastline_of_market_capital
						target = prev
					}
				}
			}
			every_neighbouring_state = {
				limit = {
					owner = root
				}
				if = {
					limit = {
						is_coastal = yes
						NOT = {
							root = {
								is_target_in_variable_list = {
									name = ec_coastline_of_market_capital
									target = prev
								}
							}
						}
					}
					root = {
						add_to_variable_list = {
							name = ec_coastline_of_market_capital
							target = prev
						}
					}
				}
				every_neighbouring_state = {
					limit = {
						owner = root
					}
					if = {
						limit = {
							is_coastal = yes
							NOT = {
								root = {
									is_target_in_variable_list = {
										name = ec_coastline_of_market_capital
										target = prev
									}
								}
							}
						}
						root = {
							add_to_variable_list = {
								name = ec_coastline_of_market_capital
								target = prev
							}
						}
					}
				}
			}
			ec_update_coastline_of_market_capital = yes
		}
	}
	
	# Cycle through every state
	
	every_scope_state = {
		
		if = {
			limit = {
				is_coastal = yes
				NOT = {
					root = {
						is_target_in_variable_list = {
							name = ec_coastline_of_market_capital
							target = prev
						}
					}
				}
			}
			if = {
				limit = {
					root.market.owner = root
					
					#
					
					save_temporary_scope_as = ec_state_1
					NOT = {
						any_neighbouring_state = {
							NOT = {
								this = scope:ec_state_1
							}
							owner = root
							root = {
								is_target_in_variable_list = {
									name = ec_coastline_of_outer_lands
									target = prev
								}
							}
						}
					}
					any_neighbouring_state = {
						NOT = {
							this = scope:ec_state_1
						}
						owner = root
						save_temporary_scope_as = ec_state_2
						NOT = {
							any_neighbouring_state = {
								NOT = {
									this = scope:ec_state_1
								}
								owner = root
								root = {
									is_target_in_variable_list = {
										name = ec_coastline_of_outer_lands
										target = prev
									}
								}
							}
						}
						OR = {
							root = {
								is_target_in_variable_list = {
									name = ec_coastline_of_market_capital
									target = prev
								}
							}
							any_neighbouring_state = {
								NOR = {
									this = scope:ec_state_1
									this = scope:ec_state_2
								}
								owner = root
								save_temporary_scope_as = ec_state_3
								NOT = {
									any_neighbouring_state = {
										NOT = {
											this = scope:ec_state_1
										}
										owner = root
										root = {
											is_target_in_variable_list = {
												name = ec_coastline_of_outer_lands
												target = prev
											}
										}
									}
								}
								OR = {
									root = {
										is_target_in_variable_list = {
											name = ec_coastline_of_market_capital
											target = prev
										}
									}
									any_neighbouring_state = {
										NOR = {
											this = scope:ec_state_1
											this = scope:ec_state_2
											this = scope:ec_state_3
										}
										owner = root
										save_temporary_scope_as = ec_state_4
										NOT = {
											any_neighbouring_state = {
												NOT = {
													this = scope:ec_state_1
												}
												owner = root
												root = {
													is_target_in_variable_list = {
														name = ec_coastline_of_outer_lands
														target = prev
													}
												}
											}
										}
										OR = {
											root = {
												is_target_in_variable_list = {
													name = ec_coastline_of_market_capital
													target = prev
												}
											}
											any_neighbouring_state = {
												NOR = {
													this = scope:ec_state_1
													this = scope:ec_state_2
													this = scope:ec_state_3
													this = scope:ec_state_4
												}
												owner = root
												save_temporary_scope_as = ec_state_5
												NOT = {
													any_neighbouring_state = {
														NOT = {
															this = scope:ec_state_1
														}
														owner = root
														root = {
															is_target_in_variable_list = {
																name = ec_coastline_of_outer_lands
																target = prev
															}
														}
													}
												}
												OR = {
													root = {
														is_target_in_variable_list = {
															name = ec_coastline_of_market_capital
															target = prev
														}
													}
													any_neighbouring_state = {
														NOR = {
															this = scope:ec_state_1
															this = scope:ec_state_2
															this = scope:ec_state_3
															this = scope:ec_state_4
															this = scope:ec_state_5
														}
														owner = root
														save_temporary_scope_as = ec_state_6
														NOT = {
															any_neighbouring_state = {
																NOT = {
																	this = scope:ec_state_1
																}
																owner = root
																root = {
																	is_target_in_variable_list = {
																		name = ec_coastline_of_outer_lands
																		target = prev
																	}
																}
															}
														}
														OR = {
															root = {
																is_target_in_variable_list = {
																	name = ec_coastline_of_market_capital
																	target = prev
																}
															}
															any_neighbouring_state = {
																NOR = {
																	this = scope:ec_state_1
																	this = scope:ec_state_2
																	this = scope:ec_state_3
																	this = scope:ec_state_4
																	this = scope:ec_state_5
																	this = scope:ec_state_6
																}
																owner = root
																save_temporary_scope_as = ec_state_7
																NOT = {
																	any_neighbouring_state = {
																		NOT = {
																			this = scope:ec_state_1
																		}
																		owner = root
																		root = {
																			is_target_in_variable_list = {
																				name = ec_coastline_of_outer_lands
																				target = prev
																			}
																		}
																	}
																}
																OR = {
																	root = {
																		is_target_in_variable_list = {
																			name = ec_coastline_of_market_capital
																			target = prev
																		}
																	}
																	any_neighbouring_state = {
																		NOR = {
																			this = scope:ec_state_1
																			this = scope:ec_state_2
																			this = scope:ec_state_3
																			this = scope:ec_state_4
																			this = scope:ec_state_5
																			this = scope:ec_state_6
																			this = scope:ec_state_7
																		}
																		owner = root
																		save_temporary_scope_as = ec_state_8
																		NOT = {
																			any_neighbouring_state = {
																				NOT = {
																					this = scope:ec_state_1
																				}
																				owner = root
																				root = {
																					is_target_in_variable_list = {
																						name = ec_coastline_of_outer_lands
																						target = prev
																					}
																				}
																			}
																		}
																		OR = {
																			root = {
																				is_target_in_variable_list = {
																					name = ec_coastline_of_market_capital
																					target = prev
																				}
																			}
																			any_neighbouring_state = {
																				NOR = {
																					this = scope:ec_state_1
																					this = scope:ec_state_2
																					this = scope:ec_state_3
																					this = scope:ec_state_4
																					this = scope:ec_state_5
																					this = scope:ec_state_6
																					this = scope:ec_state_7
																					this = scope:ec_state_8
																				}
																				owner = root
																				save_temporary_scope_as = ec_state_9
																				NOT = {
																					any_neighbouring_state = {
																						NOT = {
																							this = scope:ec_state_1
																						}
																						owner = root
																						root = {
																							is_target_in_variable_list = {
																								name = ec_coastline_of_outer_lands
																								target = prev
																							}
																						}
																					}
																				}
																				OR = {
																					root = {
																						is_target_in_variable_list = {
																							name = ec_coastline_of_market_capital
																							target = prev
																						}
																					}
																					any_neighbouring_state = {
																						NOR = {
																							this = scope:ec_state_1
																							this = scope:ec_state_2
																							this = scope:ec_state_3
																							this = scope:ec_state_4
																							this = scope:ec_state_5
																							this = scope:ec_state_6
																							this = scope:ec_state_7
																							this = scope:ec_state_8
																							this = scope:ec_state_9
																						}
																						owner = root
																						NOT = {
																							any_neighbouring_state = {
																								NOT = {
																									this = scope:ec_state_1
																								}
																								owner = root
																								root = {
																									is_target_in_variable_list = {
																										name = ec_coastline_of_outer_lands
																										target = prev
																									}
																								}
																							}
																						}
																						OR = {
																							root = {
																								is_target_in_variable_list = {
																									name = ec_coastline_of_market_capital
																									target = prev
																								}
																							}
																						}
																					}
																				}
																			}
																		}
																	}
																}
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
					}
				}
				root = {
					add_to_variable_list = {
						name = ec_coastline_of_market_capital
						target = prev
					}
					ec_update_coastline_of_market_capital = yes
				}
			}
			else = {
				root = {
					add_to_variable_list = {
						name = ec_coastline_of_outer_lands
						target = prev
					}
				}
				if = {
					limit = {
						has_building = building_port
					}
					if = {
						limit = {
							save_temporary_scope_as = ec_state_1
							any_neighbouring_state = {
								NOT = {
									this = scope:ec_state_1
								}
								save_temporary_scope_as = ec_state_2
								owner = root
								OR = {
									has_building = building_port
									any_neighbouring_state = {
										NOR = {
											this = scope:ec_state_1
											this = scope:ec_state_2
										}
										save_temporary_scope_as = ec_state_3
										owner = root
										OR = {
											has_building = building_port
											any_neighbouring_state = {
												NOR = {
													this = scope:ec_state_1
													this = scope:ec_state_2
													this = scope:ec_state_3
												}
												save_temporary_scope_as = ec_state_4
												owner = root
												OR = {
													has_building = building_port
													any_neighbouring_state = {
														NOR = {
															this = scope:ec_state_1
															this = scope:ec_state_2
															this = scope:ec_state_3
															this = scope:ec_state_4
														}
														save_temporary_scope_as = ec_state_5
														owner = root
														OR = {
															has_building = building_port
															any_neighbouring_state = {
																NOR = {
																	this = scope:ec_state_1
																	this = scope:ec_state_2
																	this = scope:ec_state_3
																	this = scope:ec_state_4
																	this = scope:ec_state_5
																}
																owner = root
																has_building = building_port
															}
														}
													}
												}
											}
										}
									}
								}
							}
						}
						root = {
							add_to_variable_list = {
								name = ec_safe_to_remove_ports_in_outer_lands
								target = prev
							}
						}
					}
				}
			}
		}
		
		# Set up state level counters of government building
		
		set_variable = {
			name = ec_government_administration_level
			value = 0
		}
		set_variable = {
			name = ec_construction_sector_level
			value = 0
		}
		set_variable = {
			name = ec_university_level
			value = 0
		}
		set_variable = {
			name = ec_railway_level
			value = 0
		}
		set_variable = {
			name = ec_port_level
			value = 0
		}
		set_variable = {
			name = ec_barracks_level
			value = 0
		}
		set_variable = {
			name = ec_naval_base_level
			value = 0
		}
		
		# Cycle through every building and count government ones on both country and state level
		
		save_scope_as = ec_current_state
		every_scope_building = {
			if = {
				limit = {
					is_building_type = building_government_administration
				}
				if = {
					limit = {
						is_under_construction = yes
					}
					root = {
						gb_renew_variable = {
							name = ec_government_administration_cooldown
							days = 98
						}
					}
				}
				root = {
					change_variable = {
						name = ec_government_administration_count
						add = prev.level
					}
				}
				scope:ec_current_state = {
					change_variable = {
						name = ec_government_administration_level
						add = prev.level
					}
				}
			}
			else_if = {
				limit = {
					is_building_type = building_construction_sector
				}
				if = {
					limit = {
						is_under_construction = yes
					}
					root = {
						gb_renew_variable = {
							name = ec_construction_sector_cooldown
							days = 98
						}
					}
				}
				root = {
					change_variable = {
						name = ec_construction_sector_count
						add = prev.level
					}
				}
				scope:ec_current_state = {
					change_variable = {
						name = ec_construction_sector_level
						add = prev.level
					}
				}
			}
			else_if = {
				limit = {
					is_building_type = building_university
				}
				if = {
					limit = {
						is_under_construction = yes
					}
					root = {
						gb_renew_variable = {
							name = ec_university_cooldown
							days = 98
						}
					}
				}
				root = {
					change_variable = {
						name = ec_university_count
						add = prev.level
					}
				}
				scope:ec_current_state = {
					change_variable = {
						name = ec_university_level
						add = prev.level
					}
				}
			}
			else_if = {
				limit = {
					is_building_type = building_railway
				}
				root = {
					change_variable = {
						name = ec_railway_count
						add = prev.level
					}
				}
				scope:ec_current_state = {
					change_variable = {
						name = ec_railway_level
						add = prev.level
					}
				}
			}
			else_if = {
				limit = {
					is_building_type = building_port
				}
				if = {
					limit = {
						is_under_construction = yes
					}
					root = {
						gb_renew_variable = {
							name = ec_port_cooldown
							days = 98
						}
					}
				}
				root = {
					change_variable = {
						name = ec_port_count
						add = prev.level
					}
				}
				scope:ec_current_state = {
					change_variable = {
						name = ec_port_level
						add = prev.level
					}
				}
			}
			else_if = {
				limit = {
					is_building_type = building_barracks
				}
				if = {
					limit = {
						is_under_construction = yes
					}
					root = {
						gb_renew_variable = {
							name = ec_barracks_cooldown
							days = 98
						}
					}
				}
				#root = {
				#	change_variable = {
				#		name = ec_barracks_count
				#		add = prev.level
				#	}
				#}
				scope:ec_current_state = {
					change_variable = {
						name = ec_barracks_level
						add = prev.level
					}
				}
			}
			else_if = {
				limit = {
					is_building_type = building_naval_base
				}
				if = {
					limit = {
						is_under_construction = yes
					}
					root = {
						gb_renew_variable = {
							name = ec_naval_base_cooldown
							days = 98
						}
					}
				}
				root = {
					change_variable = {
						name = ec_naval_base_count
						add = prev.level
					}
				}
				scope:ec_current_state = {
					change_variable = {
						name = ec_naval_base_level
						add = prev.level
					}
				}
			}
		}
		clear_saved_scope = ec_current_state
		
		# Check if the state contains any excess production
		
		if = {
			limit = {
				root = {
					has_variable = ec_check_excessive_production
				}
				#ec_has_enough_workforce = no
			}
			ec_collect_building_level_data = yes
			ec_sanitize_abandoned_buildings = yes
		}
		
		# Check if the state meets requirements of being suitable for building
		
		if = {
			limit = {
				OR = {
					ec_infrastructure_load_percent >= 0.90
					AND = {
						ec_infrastructure_load_value >= -15
						any_scope_building = {
							is_building_type = building_railway
							is_under_construction = yes
						}
					}
				}
				ec_has_enough_workforce = yes
			}
			root = {
				add_to_variable_list = {
					name = ec_suitable_states_1
					target = prev
				}
			}
		}
		else_if = {
			limit = {
				ec_infrastructure_load_percent >= 0.70
				ec_has_enough_workforce = yes
			}
			root = {
				add_to_variable_list = {
					name = ec_suitable_states_2
					target = prev
				}
			}
		}
		else_if = {
			limit = {
				ec_infrastructure_load_percent >= 0.70
			}
			root = {
				add_to_variable_list = {
					name = ec_suitable_states_3
					target = prev
				}
			}
		}
		else_if = {
			limit = {
				ec_has_enough_workforce = yes
			}
			root = {
				add_to_variable_list = {
					name = ec_suitable_states_4
					target = prev
				}
			}
		}
	}
	
	# Clear excess production variables
	
	if = {
		limit = {
			root = {
				has_variable = ec_check_excessive_production
			}
		}
		ec_clear_excessive_variables = yes
	}
}

### DOWNSIZING OF EXCESS GOVERNMENT AND PRODUCTION BUILDINGS

ec_downsize_excess_buildings = {
	
	if = {
		limit = {
			ec_bureaucracy_load >= 0.75
		}
		
		# Government administration
		
		if = {
			limit = {
				OR = {
					tax_level = low
					tax_level = medium
					tax_level = high
					tax_level = very_high
				}
				OR = {
					AND = {
						NOT = {
							ec_budget_health = {
								level = 1
							}
						}
						OR = {
							AND = {
								ec_government_administration_costs_value >= ec_government_administration_costs_ceiling
								bureaucracy >= ec_bureaucracy_excess
							}
							bureaucracy >= ec_bureaucracy_ceiling
						}
					}
					AND = {
						NOT = {
							ec_budget_health = {
								level = 0
							}
						}
						OR = {
							AND = {
								ec_government_administration_costs_value >= ec_government_administration_costs_excess
								bureaucracy >= ec_bureaucracy_target
							}
							bureaucracy >= ec_bureaucracy_excess
						}
					}
					AND = {
						NOT = {
							ec_budget_health = {
								level = -1
							}
						}
						bureaucracy >= ec_bureaucracy_target
					}
				}
			}
			random_scope_state = {
				limit = {
					ec_downsize_government_administration = yes
				}
				remove_building = building_government_administration
			}
		}
		
		# Construction sector
		
		if = {
			limit = {
				OR = {
					tax_level = medium
					tax_level = high
					tax_level = very_high
				}
				OR = {
					AND = {
						NOT = {
							ec_budget_health = {
								level = 0
							}
						}
						OR = {
							ec_construction_points_current >= ec_construction_points_ceiling
							AND = {
								ec_wartime_spending = no
								ec_construction_sector_costs_value > ec_construction_sector_costs_ceiling
							}
						}
					}
					AND = {
						NOT = {
							ec_budget_health = {
								level = -1
							}
						}
						OR = {
							ec_construction_points_current >= ec_construction_points_excess
							AND = {
								ec_wartime_spending = no
								ec_construction_sector_costs_value > ec_construction_sector_costs_excess
							}
						}
					}
					AND = {
						NOT = {
							ec_budget_health = {
								level = -2
							}
						}
						OR = {
							ec_construction_points_current >= ec_construction_points_target
							AND = {
								ec_wartime_spending = no
								ec_construction_sector_costs_value > ec_construction_sector_costs_target
							}
						}
					}
					AND = {
						NOT = {
							ec_budget_health = {
								level = -3
							}
						}
						ec_wartime_spending = no
						OR = {
							ec_in_default = yes
							ec_construction_points_current >= ec_construction_points_paucity
							ec_construction_sector_costs_value > ec_construction_sector_costs_paucity
						}
					}
				}
				any_scope_state = {
					ec_downsize_construction_sector = yes
				}
			}
			random_scope_state = {
				limit = {
					ec_downsize_construction_sector = yes
				}
				set_variable = {
					name = ec_construction_sector_level
					value = 0
				}
				random_scope_building = {
					limit = {
						is_building_type = building_construction_sector
					}
					root = {
						change_variable = {
							name = ec_construction_sector_count
							subtract = prev.level
						}
					}
				}
				remove_building = building_construction_sector
			}
		}
		
		# University
		
		if = {
			limit = {
				OR = {
					tax_level = low
					tax_level = medium
					tax_level = high
					tax_level = very_high
				}
				OR = {
					AND = {
						NOT = {
							ec_budget_health = {
								level = 1
							}
						}
						OR = {
							modifier:country_weekly_innovation_add >= ec_innovation_ceiling
							ec_university_count >= ec_university_ceiling
							ec_university_costs_value >= ec_university_costs_ceiling
						}
					}
					AND = {
						NOT = {
							ec_budget_health = {
								level = 0
							}
						}
						OR = {
							modifier:country_weekly_innovation_add >= ec_innovation_excess
							ec_university_count >= ec_university_excess
							ec_university_costs_value >= ec_university_costs_excess
						}
					}
					AND = {
						NOT = {
							ec_budget_health = {
								level = -1
							}
						}
						OR = {
							modifier:country_weekly_innovation_add >= ec_innovation_target
							ec_university_count >= ec_university_target
							ec_university_costs_value >= ec_university_costs_target
						}
					}
					AND = {
						NOT = {
							ec_budget_health = {
								level = -2
							}
						}
						ec_wartime_spending = no
						OR = {
							modifier:country_weekly_innovation_add >= ec_innovation_paucity
							ec_university_count >= ec_university_paucity
							ec_university_costs_value >= ec_university_costs_paucity
						}
					}
					AND = {
						NOT = {
							ec_budget_health = {
								level = -3
							}
						}
						ec_wartime_spending = no
						OR = {
							ec_in_default = yes
							modifier:country_weekly_innovation_add >= ec_innovation_floor
							ec_university_count >= ec_university_floor
							ec_university_costs_value >= ec_university_costs_floor
						}
					}
				}
			}
			random_scope_state = {
				limit = {
					ec_downsize_university = yes
				}
				set_variable = {
					name = ec_university_level
					value = 0
				}
				random_scope_building = {
					limit = {
						is_building_type = building_university
					}
					root = {
						change_variable = {
							name = ec_university_count
							subtract = prev.level
						}
					}
				}
				remove_building = building_university
			}
		}
		
		# Port
		
		if = {
			limit = {
				OR = {
					tax_level = medium
					tax_level = high
					tax_level = very_high
				}
				OR = {
					AND = {
						NOT = {
							ec_budget_health = {
								level = 1
							}
						}
						OR = {
							ec_convoys_current >= ec_convoys_ceiling
							ec_port_costs_value >= ec_port_costs_ceiling
						}
					}
					AND = {
						NOT = {
							ec_budget_health = {
								level = 0
							}
						}
						OR = {
							ec_convoys_current >= ec_convoys_excess
							ec_port_costs_value >= ec_port_costs_excess
						}
					}
					AND = {
						NOT = {
							ec_budget_health = {
								level = -1
							}
						}
						OR = {
							ec_convoys_current >= ec_convoys_target
							ec_port_costs_value >= ec_port_costs_target
						}
					}
					AND = {
						NOT = {
							ec_budget_health = {
								level = -2
							}
						}
						ec_wartime_spending = no
						OR = {
							ec_convoys_current >= ec_convoys_paucity
							ec_port_costs_value >= ec_port_costs_paucity
						}
					}
					AND = {
						NOT = {
							ec_budget_health = {
								level = -3
							}
						}
						ec_wartime_spending = no
						OR = {
							ec_in_default = yes
							ec_convoys_current >= ec_convoys_floor
							ec_port_costs_value >= ec_port_costs_floor
						}
					}
				}
			}
			random_scope_state = {
				limit = {
					ec_downsize_port = yes
				}
				set_variable = {
					name = ec_port_level
					value = 0
				}
				random_scope_building = {
					limit = {
						is_building_type = building_port
					}
					root = {
						change_variable = {
							name = ec_port_count
							subtract = prev.level
						}
					}
				}
				remove_building = building_port
			}
		}
		
		# Barracks
		
		if = {
			limit = {
				OR = {
					tax_level = medium
					tax_level = high
					tax_level = very_high
				}
				ec_is_using_military_forces = no
				OR = {
					AND = {
						NOT = {
							ec_budget_health = {
								level = 0
							}
						}
						OR = {
							var:ec_barracks_count >= ec_battalion_ceiling
							ec_barracks_costs_value >= ec_barracks_costs_ceiling
						}
					}
					AND = {
						NOT = {
							ec_budget_health = {
								level = -1
							}
						}
						OR = {
							var:ec_barracks_count >= ec_battalion_excess
							ec_barracks_costs_value >= ec_barracks_costs_excess
						}
					}
					AND = {
						NOT = {
							ec_budget_health = {
								level = -2
							}
						}
						OR = {
							var:ec_barracks_count >= ec_battalion_target
							ec_barracks_costs_value >= ec_barracks_costs_target
						}
					}
					AND = {
						NOT = {
							ec_budget_health = {
								level = -3
							}
						}
						ec_in_default = yes
						var:ec_barracks_count >= ec_battalion_floor
					}
				}
			}
			random_scope_state = {
				limit = {
					ec_downsize_barracks = yes
				}
				set_variable = {
					name = ec_barracks_level
					value = 0
				}
				random_scope_building = {
					limit = {
						is_building_type = building_barracks
					}
					root = {
						change_variable = {
							name = ec_barracks_count
							subtract = prev.level
						}
					}
				}
				remove_building = building_barracks
			}
		}
		
		# Naval base
		
		if = {
			limit = {
				OR = {
					tax_level = medium
					tax_level = high
					tax_level = very_high
				}
				ec_is_using_military_forces = no
				OR = {
					AND = {
						NOT = {
							ec_budget_health = {
								level = 0
							}
						}
						OR = {
							navy_size >= ec_flotilla_ceiling
							ec_naval_base_costs_value >= ec_naval_base_costs_ceiling
						}
					}
					AND = {
						NOT = {
							ec_budget_health = {
								level = -1
							}
						}
						OR = {
							navy_size >= ec_flotilla_excess
							ec_naval_base_costs_value >= ec_naval_base_costs_excess
						}
					}
					AND = {
						NOT = {
							ec_budget_health = {
								level = -2
							}
						}
						OR = {
							navy_size >= ec_flotilla_target
							ec_naval_base_costs_value >= ec_naval_base_costs_target
						}
					}
					AND = {
						NOT = {
							ec_budget_health = {
								level = -3
							}
						}
						ec_in_default = yes
						navy_size >= ec_flotilla_floor
					}
				}
			}
			random_scope_state = {
				limit = {
					ec_downsize_naval_base = yes
				}
				set_variable = {
					name = ec_naval_base_level
					value = 0
				}
				random_scope_building = {
					limit = {
						is_building_type = building_naval_base
					}
					root = {
						change_variable = {
							name = ec_naval_base_count
							subtract = prev.level
						}
					}
				}
				remove_building = building_naval_base
			}
		}
	}
	
	if = {
		limit = {
			has_variable = ec_check_excessive_production
		}
		ec_downsize_production_buildings = yes
	}
}

### CLEAR VARIABLES USED IN DOWNSIZING BUT NOT IN BUILDING

ec_clear_downsize_variables = {
	remove_variable = ec_government_administration_count
	remove_variable = ec_construction_sector_count
	remove_variable = ec_railway_count
	remove_variable = ec_port_count
	remove_variable = ec_naval_base_count
	every_scope_state = {
		remove_variable = ec_government_administration_level
		remove_variable = ec_university_level
		remove_variable = ec_railway_level
		if = {
			limit = {
				root = {
					NOT = {
						has_variable = ec_check_excessive_production
					}
					has_variable = ec_had_excessive_production
				}
			}
			ec_clear_abandoned_variables = yes
		}
	}
}

### CHECK CONSTRUCTION POINTS PER BUILDING AND FREE ONES

ec_check_construction_points = {
	
	# Calculate free construction points available for the country
	
	set_variable = {
		name = ec_free_construction_points
		value = {
			
			# Base value is how much construction country does have
			
			value = ec_construction_points_current
			
			# If you are not deep in debt then add standard building limit over it to build a bit more and thus reduce downtime
			
			if = {
				limit = {
					OR = {
						is_player = yes
						scaled_debt <= 0.30
						NOT = {
							any_scope_building = {
								is_building_type = building_construction_sector
								level > 0
							}
						}
					}
				}
				add = {
					value = ec_building_limit_5_6
					multiply = {
						value = ec_construction_points_per_building
						min = 0.5
					}
				}
			}
			
			# If you are deep in debt then instead only part of queue potential is used to reduce construction costs
			
			else = {
				multiply = {
					value = 0.50 # from 0.30 (max) to 0.45 (min)
					subtract = scaled_debt
					multiply = 5
					min = 0.25
					max = 1.00
				}
			}
			
			# Subtract construction points that are already used for buildings in the queue
			
			subtract = {
				value = num_queued_constructions
				multiply = {
					value = ec_construction_points_per_building
					min = 0.5
				}
			}
		}
	}
}

### CHECK AND CONSTRUCT SPECIAL BUILDINGS SUCH AS MONUMENTS OR CANALS

ec_construct_special_buildings = {
	
	# Suez Canal
	
	if = {
		limit = {
			has_technology_researched = colonization
			owns_treaty_port_in = STATE_SINAI
			has_variable = suez_survey_complete
			NOT = {
				s:STATE_SINAI = {
					any_scope_state = {
						any_scope_building = {
							is_building_type = building_suez_canal
						}
					}
				}
			}
		}
		s:STATE_SINAI = {
			random_scope_state = {
				limit = {
					owner = root
				}
				start_building_construction = building_suez_canal
			}
		}
	}
	
	# Panama Canal
	
	if = {
		limit = {
			has_technology_researched = civilizing_mission
			owns_treaty_port_in = STATE_PANAMA
			has_variable = panama_survey_complete
			NOT = {
				s:STATE_PANAMA = {
					any_scope_state = {
						any_scope_building = {
							is_building_type = building_panama_canal
						}
					}
				}
			}
		}
		s:STATE_PANAMA = {
			random_scope_state = {
				limit = {
					owner = root
				}
				start_building_construction = building_panama_canal
			}
		}
	}
	
	# Big Ben
	
	if = {
		limit = {
			s:STATE_HOME_COUNTIES = {
				any_scope_state = {
					owner = root
				}
				NOT = {
					any_scope_state = {
						any_scope_building = {
							is_building_type = building_big_ben
						}
					}
				}
			}
		}
		s:STATE_HOME_COUNTIES = {
			random_scope_state = {
				limit = {
					owner = root
				}
				start_building_construction = building_big_ben
			}
		}
	}
	
	# Eiffel Tower
	
	if = {
		limit = {
			has_technology_researched = steel_frame_buildings
			s:STATE_ILE_DE_FRANCE = {
				any_scope_state = {
					owner = root
				}
				NOT = {
					any_scope_state = {
						any_scope_building = {
							is_building_type = building_eiffel_tower
						}
					}
				}
			}
		}
		s:STATE_ILE_DE_FRANCE = {
			random_scope_state = {
				limit = {
					owner = root
				}
				start_building_construction = building_eiffel_tower
			}
		}
	}
	
	# Statue of Liberty
	
	if = {
		limit = {
			has_technology_researched = steel_frame_buildings
			s:STATE_NEW_YORK = {
				any_scope_state = {
					owner = root
				}
				NOT = {
					any_scope_state = {
						any_scope_building = {
							is_building_type = building_statue_of_liberty
						}
					}
				}
			}
		}
		s:STATE_NEW_YORK = {
			random_scope_state = {
				limit = {
					owner = root
				}
				start_building_construction = building_statue_of_liberty
			}
		}
	}
	
	# Mosque of Djenne
	
	if = {
		limit = {
			s:STATE_EASTERN_MALI = {
				any_scope_state = {
					owner = root
				}
				NOT = {
					any_scope_state = {
						any_scope_building = {
							is_building_type = building_mosque_of_djenne
						}
					}
				}
			}
		}
		s:STATE_EASTERN_MALI = {
			random_scope_state = {
				limit = {
					owner = root
				}
				start_building_construction = building_mosque_of_djenne
			}
		}
	}
	
	# Skyscraper
	
	random_scope_state = {
		limit = {
			has_modifier = skyscraper_site
			NOT = {
				any_scope_building = {
					is_building_type = building_skyscraper
				}
			}
		}
		start_building_construction = building_skyscraper
	}
	
	# Compatibility
	
	cp_construct_special_buildings = yes
}

### CLEARING VARIABLES THAT ARE USED GLOBALLY

# Country level variables with additional values

ec_clear_country_variables = {
	remove_variable = ec_incorporated_population
	remove_variable = ec_total_coastal_population
	remove_variable = ec_incorporated_coastal_population
	remove_variable = ec_incorporated_gdp
	remove_variable = ec_barracks_count
	remove_variable = ec_conscription_center_count
	remove_variable = ec_country_previous_treasury
	remove_variable = ec_country_budget_surplus
	ec_clear_budget_cost_variables = yes
	remove_variable = ec_construction_sector_per_point_previous
}

# Building variables with all the data used in evaluation and constructing

ec_clear_building_variables = {
	
	remove_variable = ec_square_root_of_incorporated_population
	remove_variable = ec_square_root_of_construction_points
	remove_variable = ec_square_root_of_gdp
	remove_variable = ec_square_root_of_gdp_per_capita
	remove_variable = ec_square_root_of_incorporated_gdp_per_capita
	remove_variable = ec_square_root_of_minus_half_unincorporated_gdp_per_capita
	remove_variable = ec_surplus_bureaucracy_target
	remove_variable = ec_army_size_equal_to_average_threat
	remove_variable = ec_navy_size_equal_to_average_threat
	remove_variable = ec_army_size_equal_to_biggest_threat
	remove_variable = ec_navy_size_equal_to_biggest_threat
	remove_variable = ec_resource_offset_country_factor
	remove_variable = ec_arable_offset_country_factor
	remove_variable = ec_industry_offset_country_factor
	
	clear_variable_list = ec_coastline_of_market_capital
	clear_variable_list = ec_coastline_of_outer_lands
	clear_variable_list = ec_safe_to_remove_ports_in_outer_lands
	
	# Variables from downsizing that are used in building as well
	
	remove_variable = ec_university_count
	#remove_variable = ec_barracks_count
	
	remove_variable = ec_had_excessive_production
	if = {
		limit = {
			has_variable = ec_check_excessive_production
		}
		remove_variable = ec_check_excessive_production
		set_variable = ec_had_excessive_production
	}
	
	clear_variable_list = ec_suitable_states_1
	clear_variable_list = ec_suitable_states_2
	clear_variable_list = ec_suitable_states_3
	clear_variable_list = ec_suitable_states_4
	
	remove_variable = ec_free_construction_points
	
	remove_variable = ec_building_days
	
	ec_clear_technical_variables = yes
	every_scope_state = {
		remove_variable = ec_available_workforce
		remove_variable = ec_flexible_workforce
		remove_variable = ec_construction_sector_level
		remove_variable = ec_port_level
		remove_variable = ec_barracks_level
		remove_variable = ec_naval_base_level
		remove_variable = ecaqb
		remove_variable = ecqab
	}
}

### DECHIPER ARABLE RESOURCES

ec_decipher_arable_resources = {
	set_variable = {
		name = ecaar
		value = state_region.var:ecaar
	}
	set_variable = {
		name = ecaar1
		value = var:ecaar
	}
	if = {
		limit = {
			var:ecaar >= 300000
		}
		change_variable = {
			name = ecaar
			subtract = 300000
		}
	}
	else_if = {
		limit = {
			var:ecaar >= 200000
		}
		change_variable = {
			name = ecaar
			subtract = 200000
		}
	}
	else_if = {
		limit = {
			var:ecaar >= 100000
		}
		change_variable = {
			name = ecaar
			subtract = 100000
		}
	}
	set_variable = {
		name = ecaar2
		value = var:ecaar
	}
	if = {
		limit = {
			var:ecaar >= 30000
		}
		change_variable = {
			name = ecaar
			subtract = 30000
		}
	}
	else_if = {
		limit = {
			var:ecaar >= 20000
		}
		change_variable = {
			name = ecaar
			subtract = 20000
		}
	}
	else_if = {
		limit = {
			var:ecaar >= 10000
		}
		change_variable = {
			name = ecaar
			subtract = 10000
		}
	}
	set_variable = {
		name = ecaar3
		value = var:ecaar
	}
	if = {
		limit = {
			var:ecaar >= 3000
		}
		change_variable = {
			name = ecaar
			subtract = 3000
		}
	}
	else_if = {
		limit = {
			var:ecaar >= 2000
		}
		change_variable = {
			name = ecaar
			subtract = 2000
		}
	}
	else_if = {
		limit = {
			var:ecaar >= 1000
		}
		change_variable = {
			name = ecaar
			subtract = 1000
		}
	}
	set_variable = {
		name = ecaar4
		value = var:ecaar
	}
	if = {
		limit = {
			var:ecaar >= 300
		}
		change_variable = {
			name = ecaar
			subtract = 300
		}
	}
	else_if = {
		limit = {
			var:ecaar >= 200
		}
		change_variable = {
			name = ecaar
			subtract = 200
		}
	}
	else_if = {
		limit = {
			var:ecaar >= 100
		}
		change_variable = {
			name = ecaar
			subtract = 100
		}
	}
	set_variable = {
		name = ecaar5
		value = var:ecaar
	}
	if = {
		limit = {
			var:ecaar >= 30
		}
		change_variable = {
			name = ecaar
			subtract = 30
		}
	}
	else_if = {
		limit = {
			var:ecaar >= 20
		}
		change_variable = {
			name = ecaar
			subtract = 20
		}
	}
	else_if = {
		limit = {
			var:ecaar >= 10
		}
		change_variable = {
			name = ecaar
			subtract = 10
		}
	}
	set_variable = {
		name = ecaar6
		value = var:ecaar
	}
	remove_variable = ecaar
}

ec_clear_decipher_variables = {
	remove_variable = ecaar1
	remove_variable = ecaar2
	remove_variable = ecaar3
	remove_variable = ecaar4
	remove_variable = ecaar5
	remove_variable = ecaar6
}

### EXTERNALLY GENERATED EFFECTS

ec_create_building_type_array = {
	ec_add_building_type_to_array = { number = 1 priority = 1 counter = 1 arable = 0 }
	ec_add_building_type_to_array = { number = 2 priority = 2 counter = 2 arable = 0 }
	ec_add_building_type_to_array = { number = 3 priority = 9 counter = 3 arable = 0 }
	ec_add_building_type_to_array = { number = 4 priority = 3 counter = 4 arable = 0 }
	ec_add_building_type_to_array = { number = 5 priority = 3 counter = 5 arable = 0 }
	ec_add_building_type_to_array = { number = 6 priority = 9 counter = 6 arable = 0 }
	ec_add_building_type_to_array = { number = 7 priority = 9 counter = 7 arable = 0 }
	ec_add_building_type_to_array = { number = 8 priority = 5 counter = 8 arable = 0 }
	ec_add_building_type_to_array = { number = 9 priority = 13 counter = 9 arable = 0 }
	ec_add_building_type_to_array = { number = 10 priority = 5 counter = 10 arable = 0 }
	ec_add_building_type_to_array = { number = 11 priority = 5 counter = 11 arable = 0 }
	ec_add_building_type_to_array = { number = 12 priority = 5 counter = 12 arable = 0 }
	ec_add_building_type_to_array = { number = 13 priority = 6 counter = 13 arable = 0 }
	ec_add_building_type_to_array = { number = 14 priority = 5 counter = 14 arable = 0 }
	ec_add_building_type_to_array = { number = 15 priority = 11 counter = 15 arable = 0 }
	ec_add_building_type_to_array = { number = 16 priority = 6 counter = 16 arable = 0 }
	ec_add_building_type_to_array = { number = 17 priority = 4 counter = 17 arable = 0 }
	ec_add_building_type_to_array = { number = 18 priority = 10 counter = 18 arable = 1 }
	ec_add_building_type_to_array = { number = 19 priority = 10 counter = 18 arable = 1 }
	ec_add_building_type_to_array = { number = 20 priority = 10 counter = 18 arable = 1 }
	ec_add_building_type_to_array = { number = 21 priority = 10 counter = 18 arable = 1 }
	ec_add_building_type_to_array = { number = 22 priority = 10 counter = 18 arable = 1 }
	ec_add_building_type_to_array = { number = 23 priority = 5 counter = 23 arable = 1 }
	ec_add_building_type_to_array = { number = 24 priority = 5 counter = 23 arable = 1 }
	ec_add_building_type_to_array = { number = 25 priority = 11 counter = 25 arable = 1 }
	ec_add_building_type_to_array = { number = 26 priority = 11 counter = 26 arable = 1 }
	ec_add_building_type_to_array = { number = 27 priority = 13 counter = 27 arable = 1 }
	ec_add_building_type_to_array = { number = 28 priority = 13 counter = 28 arable = 1 }
	ec_add_building_type_to_array = { number = 29 priority = 15 counter = 29 arable = 1 }
	ec_add_building_type_to_array = { number = 30 priority = 15 counter = 30 arable = 1 }
	ec_add_building_type_to_array = { number = 31 priority = 14 counter = 31 arable = 1 }
	ec_add_building_type_to_array = { number = 32 priority = 11 counter = 32 arable = 1 }
	ec_add_building_type_to_array = { number = 33 priority = 14 counter = 33 arable = 0 }
	ec_add_building_type_to_array = { number = 34 priority = 15 counter = 34 arable = 0 }
	ec_add_building_type_to_array = { number = 35 priority = 12 counter = 35 arable = 0 }
	ec_add_building_type_to_array = { number = 36 priority = 12 counter = 36 arable = 0 }
	ec_add_building_type_to_array = { number = 37 priority = 7 counter = 37 arable = 0 }
	ec_add_building_type_to_array = { number = 38 priority = 4 counter = 38 arable = 0 }
	ec_add_building_type_to_array = { number = 39 priority = 6 counter = 39 arable = 0 }
	ec_add_building_type_to_array = { number = 40 priority = 6 counter = 25 arable = 0 }
	ec_add_building_type_to_array = { number = 41 priority = 12 counter = 41 arable = 0 }
	ec_add_building_type_to_array = { number = 42 priority = 6 counter = 42 arable = 0 }
	ec_add_building_type_to_array = { number = 43 priority = 7 counter = 43 arable = 0 }
	ec_add_building_type_to_array = { number = 44 priority = 4 counter = 44 arable = 0 }
	ec_add_building_type_to_array = { number = 45 priority = 8 counter = 45 arable = 0 }
	ec_add_building_type_to_array = { number = 46 priority = 7 counter = 46 arable = 0 }
	ec_add_building_type_to_array = { number = 47 priority = 7 counter = 47 arable = 0 }
	ec_add_building_type_to_array = { number = 48 priority = 8 counter = 48 arable = 0 }
	ec_add_building_type_to_array = { number = 49 priority = 8 counter = 49 arable = 0 }
	cp_create_building_type_array = yes
}

ec_add_building_type_to_array = {
	random_state_region = {
		limit = {
			NOT = {
				has_variable = ecbtn
			}
		}
		add_to_global_variable_list = {
			name = ecbta
			target = this
		}
		set_variable = {
			name = ecbtn
			value = $number$
		}
		set_variable = {
			name = ecbtp
			value = $priority$
		}
		set_variable = {
			name = ecbtc
			value = $counter$
		}
		set_variable = {
			name = ecbta
			value = $arable$
		}
	}
}

ec_collect_existing_arables = {
	every_country = {
		every_scope_state = {
			limit = {
				state_region = {
					NOT = {
						has_variable = eccar
					}
				}
			}
			state_region = {
				set_variable = eccar
				ec_check_and_queue_arables = { building = building_wheat_farm number = 18 resource = 1 }
				ec_check_and_queue_arables = { building = building_rye_farm number = 19 resource = 2 }
				ec_check_and_queue_arables = { building = building_rice_farm number = 20 resource = 3 }
				ec_check_and_queue_arables = { building = building_maize_farm number = 21 resource = 4 }
				ec_check_and_queue_arables = { building = building_millet_farm number = 22 resource = 5 }
				ec_check_and_queue_arables = { building = building_livestock_ranch number = 23 resource = 10 }
				ec_check_and_queue_arables = { building = building_cotton_plantation number = 24 resource = 20 }
				ec_check_and_queue_arables = { building = building_dye_plantation number = 25 resource = 100 }
				ec_check_and_queue_arables = { building = building_silk_plantation number = 26 resource = 200 }
				ec_check_and_queue_arables = { building = building_banana_plantation number = 27 resource = 1000 }
				ec_check_and_queue_arables = { building = building_sugar_plantation number = 28 resource = 2000 }
				ec_check_and_queue_arables = { building = building_tea_plantation number = 29 resource = 10000 }
				ec_check_and_queue_arables = { building = building_coffee_plantation number = 30 resource = 20000 }
				ec_check_and_queue_arables = { building = building_tobacco_plantation number = 31 resource = 100000 }
				ec_check_and_queue_arables = { building = building_opium_plantation number = 32 resource = 200000 }
			}
		}
	}
}

ec_check_and_queue_arables = {
	if = {
		limit = {
			any_scope_state = {
				any_scope_building = {
					is_building_type = $building$
				}
			}
		}
		if = {
			limit = {
				NOT = {
					has_variable = ecaar
				}
			}
			set_variable = {
				name = ecaar
				value = 0
			}
		}
		change_variable = {
			name = ecaar
			add = $resource$
		}
	}
	else = {
		if = {
			limit = {
				NOT = {
					any_scope_state = {
						free_arable_land > 0
					}
				}
			}
			add_arable_land = 1
			set_variable = ecaas
		}
		random_scope_state = {
			limit = {
				free_arable_land > 0
			}
			start_building_construction = $building$
			state_region = {
				set_variable = ecca$number$
			}
		}
	}
}

ec_collect_arables_in_queue = {
	every_country = {
		every_scope_state = {
			limit = {
				state_region = {
					has_variable = eccar
				}
			}
			state_region = {
				ec_check_arables_in_queue = { building = building_wheat_farm number = 18 resource = 1 }
				ec_check_arables_in_queue = { building = building_rye_farm number = 19 resource = 2 }
				ec_check_arables_in_queue = { building = building_rice_farm number = 20 resource = 3 }
				ec_check_arables_in_queue = { building = building_maize_farm number = 21 resource = 4 }
				ec_check_arables_in_queue = { building = building_millet_farm number = 22 resource = 5 }
				ec_check_arables_in_queue = { building = building_livestock_ranch number = 23 resource = 10 }
				ec_check_arables_in_queue = { building = building_cotton_plantation number = 24 resource = 20 }
				ec_check_arables_in_queue = { building = building_dye_plantation number = 25 resource = 100 }
				ec_check_arables_in_queue = { building = building_silk_plantation number = 26 resource = 200 }
				ec_check_arables_in_queue = { building = building_banana_plantation number = 27 resource = 1000 }
				ec_check_arables_in_queue = { building = building_sugar_plantation number = 28 resource = 2000 }
				ec_check_arables_in_queue = { building = building_tea_plantation number = 29 resource = 10000 }
				ec_check_arables_in_queue = { building = building_coffee_plantation number = 30 resource = 20000 }
				ec_check_arables_in_queue = { building = building_tobacco_plantation number = 31 resource = 100000 }
				ec_check_arables_in_queue = { building = building_opium_plantation number = 32 resource = 200000 }
				if = {
					limit = {
						has_variable = ecaas
					}
					add_arable_land = -1
					remove_variable = ecaas
				}
				remove_variable = eccar
			}
		}
	}
}

ec_check_arables_in_queue = {
	if = {
		limit = {
			has_variable = ecca$number$
		}
		if = {
			limit = {
				any_scope_state = {
					any_scope_building = {
						is_building_type = $building$
					}
				}
			}
			if = {
				limit = {
					NOT = {
						has_variable = ecaar
					}
				}
				set_variable = {
					name = ecaar
					value = 0
				}
			}
			change_variable = {
				name = ecaar
				add = $resource$
			}
			every_scope_state = {
				limit = {
					any_scope_building = {
						is_building_type = $building$
					}
				}
				remove_building = $building$
			}
		}
		remove_variable = ecca$number$
	}
}

ec_check_excessive_production = {
	ec_is_production_excessive = { building = building_logging_camp number = 8 }
	ec_is_production_excessive = { building = building_fishing_wharf number = 9 }
	ec_is_production_excessive = { building = building_whaling_station number = 10 }
	ec_is_production_excessive = { building = building_coal_mine number = 11 }
	ec_is_production_excessive = { building = building_iron_mine number = 12 }
	ec_is_production_excessive = { building = building_lead_mine number = 13 }
	ec_is_production_excessive = { building = building_sulfur_mine number = 14 }
	ec_is_production_excessive = { building = building_gold_mine number = 15 }
	ec_is_production_excessive = { building = building_rubber_plantation number = 16 }
	ec_is_production_excessive = { building = building_wheat_farm number = 18 }
	ec_is_production_excessive = { building = building_rye_farm number = 19 }
	ec_is_production_excessive = { building = building_rice_farm number = 20 }
	ec_is_production_excessive = { building = building_maize_farm number = 21 }
	ec_is_production_excessive = { building = building_millet_farm number = 22 }
	ec_is_production_excessive = { building = building_livestock_ranch number = 23 }
	ec_is_production_excessive = { building = building_cotton_plantation number = 24 }
	ec_is_production_excessive = { building = building_dye_plantation number = 25 }
	ec_is_production_excessive = { building = building_silk_plantation number = 26 }
	ec_is_production_excessive = { building = building_banana_plantation number = 27 }
	ec_is_production_excessive = { building = building_sugar_plantation number = 28 }
	ec_is_production_excessive = { building = building_tea_plantation number = 29 }
	ec_is_production_excessive = { building = building_coffee_plantation number = 30 }
	ec_is_production_excessive = { building = building_tobacco_plantation number = 31 }
	ec_is_production_excessive = { building = building_opium_plantation number = 32 }
	ec_is_production_excessive = { building = building_food_industry number = 33 }
	ec_is_production_excessive = { building = building_arts_academy number = 34 }
	ec_is_production_excessive = { building = building_textile_mills number = 35 }
	ec_is_production_excessive = { building = building_furniture_manufacturies number = 36 }
	ec_is_production_excessive = { building = building_glassworks number = 37 }
	ec_is_production_excessive = { building = building_tooling_workshops number = 38 }
	ec_is_production_excessive = { building = building_paper_mills number = 39 }
	ec_is_production_excessive = { building = building_chemical_plants number = 40 }
	ec_is_production_excessive = { building = building_synthetics_plants number = 41 }
	ec_is_production_excessive = { building = building_steel_mills number = 42 }
	ec_is_production_excessive = { building = building_motor_industry number = 43 }
	ec_is_production_excessive = { building = building_power_plant number = 44 }
	ec_is_production_excessive = { building = building_shipyards number = 45 }
	ec_is_production_excessive = { building = building_arms_industry number = 46 }
	ec_is_production_excessive = { building = building_munition_plants number = 47 }
	ec_is_production_excessive = { building = building_electrics_industry number = 48 }
	ec_is_production_excessive = { building = building_war_machine_industry number = 49 }
	cp_check_excessive_production = yes
}

ec_is_production_excessive = {
	if = {
		limit = {
			ec_evaluate_$building$ = {
				priority = 0
			}
		}
		set_variable = ecep$number$
	}
}

ec_collect_building_level_data = {
	save_scope_as = ec_current_state
	every_scope_building = {
		if = { limit = { is_building_type = building_government_administration } ec_check_building_condition = { building = building_government_administration number = 1 workforce = 0 } }
		else_if = { limit = { is_building_type = building_construction_sector } ec_check_building_condition = { building = building_construction_sector number = 2 workforce = 0 } }
		else_if = { limit = { is_building_type = building_university } ec_check_building_condition = { building = building_university number = 3 workforce = 0 } }
		else_if = { limit = { is_building_type = building_railway } ec_check_building_condition = { building = building_railway number = 4 workforce = 0 } }
		else_if = { limit = { is_building_type = building_port } ec_check_building_condition = { building = building_port number = 5 workforce = 0 } }
		else_if = { limit = { is_building_type = building_barracks } ec_check_building_condition = { building = building_barracks number = 6 workforce = 0 } }
		else_if = { limit = { is_building_type = building_naval_base } ec_check_building_condition = { building = building_naval_base number = 7 workforce = 0 } }
		else_if = { limit = { is_building_type = building_logging_camp } ec_check_building_condition = { building = building_logging_camp number = 8 workforce = 1 } }
		else_if = { limit = { is_building_type = building_fishing_wharf } ec_check_building_condition = { building = building_fishing_wharf number = 9 workforce = 1 } }
		else_if = { limit = { is_building_type = building_whaling_station } ec_check_building_condition = { building = building_whaling_station number = 10 workforce = 1 } }
		else_if = { limit = { is_building_type = building_coal_mine } ec_check_building_condition = { building = building_coal_mine number = 11 workforce = 1 } }
		else_if = { limit = { is_building_type = building_iron_mine } ec_check_building_condition = { building = building_iron_mine number = 12 workforce = 1 } }
		else_if = { limit = { is_building_type = building_lead_mine } ec_check_building_condition = { building = building_lead_mine number = 13 workforce = 1 } }
		else_if = { limit = { is_building_type = building_sulfur_mine } ec_check_building_condition = { building = building_sulfur_mine number = 14 workforce = 1 } }
		else_if = { limit = { is_building_type = building_gold_mine } ec_check_building_condition = { building = building_gold_mine number = 15 workforce = 1 } }
		else_if = { limit = { is_building_type = building_rubber_plantation } ec_check_building_condition = { building = building_rubber_plantation number = 16 workforce = 1 } }
		else_if = { limit = { is_building_type = building_oil_rig } ec_check_building_condition = { building = building_oil_rig number = 17 workforce = 0 } }
		else_if = { limit = { is_building_type = building_wheat_farm } ec_check_building_condition = { building = building_wheat_farm number = 18 workforce = 1 } }
		else_if = { limit = { is_building_type = building_rye_farm } ec_check_building_condition = { building = building_rye_farm number = 19 workforce = 1 } }
		else_if = { limit = { is_building_type = building_rice_farm } ec_check_building_condition = { building = building_rice_farm number = 20 workforce = 1 } }
		else_if = { limit = { is_building_type = building_maize_farm } ec_check_building_condition = { building = building_maize_farm number = 21 workforce = 1 } }
		else_if = { limit = { is_building_type = building_millet_farm } ec_check_building_condition = { building = building_millet_farm number = 22 workforce = 1 } }
		else_if = { limit = { is_building_type = building_livestock_ranch } ec_check_building_condition = { building = building_livestock_ranch number = 23 workforce = 1 } }
		else_if = { limit = { is_building_type = building_cotton_plantation } ec_check_building_condition = { building = building_cotton_plantation number = 24 workforce = 1 } }
		else_if = { limit = { is_building_type = building_dye_plantation } ec_check_building_condition = { building = building_dye_plantation number = 25 workforce = 1 } }
		else_if = { limit = { is_building_type = building_silk_plantation } ec_check_building_condition = { building = building_silk_plantation number = 26 workforce = 1 } }
		else_if = { limit = { is_building_type = building_banana_plantation } ec_check_building_condition = { building = building_banana_plantation number = 27 workforce = 1 } }
		else_if = { limit = { is_building_type = building_sugar_plantation } ec_check_building_condition = { building = building_sugar_plantation number = 28 workforce = 1 } }
		else_if = { limit = { is_building_type = building_tea_plantation } ec_check_building_condition = { building = building_tea_plantation number = 29 workforce = 1 } }
		else_if = { limit = { is_building_type = building_coffee_plantation } ec_check_building_condition = { building = building_coffee_plantation number = 30 workforce = 1 } }
		else_if = { limit = { is_building_type = building_tobacco_plantation } ec_check_building_condition = { building = building_tobacco_plantation number = 31 workforce = 1 } }
		else_if = { limit = { is_building_type = building_opium_plantation } ec_check_building_condition = { building = building_opium_plantation number = 32 workforce = 1 } }
		else_if = { limit = { is_building_type = building_food_industry } ec_check_building_condition = { building = building_food_industry number = 33 workforce = 1 } }
		else_if = { limit = { is_building_type = building_arts_academy } ec_check_building_condition = { building = building_arts_academy number = 34 workforce = 1 } }
		else_if = { limit = { is_building_type = building_textile_mills } ec_check_building_condition = { building = building_textile_mills number = 35 workforce = 1 } }
		else_if = { limit = { is_building_type = building_furniture_manufacturies } ec_check_building_condition = { building = building_furniture_manufacturies number = 36 workforce = 1 } }
		else_if = { limit = { is_building_type = building_glassworks } ec_check_building_condition = { building = building_glassworks number = 37 workforce = 1 } }
		else_if = { limit = { is_building_type = building_tooling_workshops } ec_check_building_condition = { building = building_tooling_workshops number = 38 workforce = 1 } }
		else_if = { limit = { is_building_type = building_paper_mills } ec_check_building_condition = { building = building_paper_mills number = 39 workforce = 1 } }
		else_if = { limit = { is_building_type = building_chemical_plants } ec_check_building_condition = { building = building_chemical_plants number = 40 workforce = 1 } }
		else_if = { limit = { is_building_type = building_synthetics_plants } ec_check_building_condition = { building = building_synthetics_plants number = 41 workforce = 1 } }
		else_if = { limit = { is_building_type = building_steel_mills } ec_check_building_condition = { building = building_steel_mills number = 42 workforce = 1 } }
		else_if = { limit = { is_building_type = building_motor_industry } ec_check_building_condition = { building = building_motor_industry number = 43 workforce = 1 } }
		else_if = { limit = { is_building_type = building_power_plant } ec_check_building_condition = { building = building_power_plant number = 44 workforce = 1 } }
		else_if = { limit = { is_building_type = building_shipyards } ec_check_building_condition = { building = building_shipyards number = 45 workforce = 1 } }
		else_if = { limit = { is_building_type = building_arms_industry } ec_check_building_condition = { building = building_arms_industry number = 46 workforce = 1 } }
		else_if = { limit = { is_building_type = building_munition_plants } ec_check_building_condition = { building = building_munition_plants number = 47 workforce = 1 } }
		else_if = { limit = { is_building_type = building_electrics_industry } ec_check_building_condition = { building = building_electrics_industry number = 48 workforce = 1 } }
		else_if = { limit = { is_building_type = building_war_machine_industry } ec_check_building_condition = { building = building_war_machine_industry number = 49 workforce = 1 } }
		else = { cp_collect_building_level_data = yes }
	}
	clear_saved_scope = ec_current_state
}

ec_check_building_condition = {
	if = {
		limit = {
			level <= 0
			is_under_construction = no
		}
		scope:ec_current_state = {
			remove_building = $building$
		}
	}
	else_if = {
		limit = {
			$workforce$ = 1
		}
		scope:ec_current_state = {
			if = {
				limit = {
					prev = {
						ec_building_is_abandoned = yes
					}
					NOT = {
						has_active_building = building_conscription_center
					}
				}
				if = {
					limit = {
						NOT = {
							has_variable = ec$number$ia
						}
					}
					set_variable = {
						name = ec$number$ia
						value = prev.ec_occupied_levels
					}
				}
				else = {
					if = {
						limit = {
							var:ec$number$ia >= 100000
						}
						change_variable = {
							name = ec$number$ia
							subtract = 100000
						}
					}
					if = {
						limit = {
							var:ec$number$ia > prev.ec_occupied_levels_with_margin
						}
						set_variable = {
							name = ec$number$ia
							value = {
								value = prev.ec_occupied_levels
								add = 100000
							}
						}
					}
					else = {
						remove_variable = ec$number$ia
					}
				}
			}
			else_if = {
				limit = {
					has_variable = ec$number$ia
				}
				remove_variable = ec$number$ia
			}
			if = {
				limit = {
					NOT = {
						has_variable = ec$number$ia
					}
					root = {
						has_variable = ecep$number$
					}
					prev = {
						ec_building_is_excessive = yes
					}
				}
				if = {
					limit = {
						NOT = {
							has_variable = ec_flexible_workforce
						}
					}
					set_variable = {
						name = ec_flexible_workforce
						value = 0
					}
				}
				change_variable = {
					name = ec_flexible_workforce
					add = {
						value = prev.level
						multiply = prev.occupancy
						multiply = 1250
					}
				}
			}
		}
	}
}

ec_sanitize_abandoned_buildings = {
	ec_recheck_abandoned_building = { building = building_logging_camp number = 8 }
	ec_recheck_abandoned_building = { building = building_fishing_wharf number = 9 }
	ec_recheck_abandoned_building = { building = building_whaling_station number = 10 }
	ec_recheck_abandoned_building = { building = building_coal_mine number = 11 }
	ec_recheck_abandoned_building = { building = building_iron_mine number = 12 }
	ec_recheck_abandoned_building = { building = building_lead_mine number = 13 }
	ec_recheck_abandoned_building = { building = building_sulfur_mine number = 14 }
	ec_recheck_abandoned_building = { building = building_gold_mine number = 15 }
	ec_recheck_abandoned_building = { building = building_rubber_plantation number = 16 }
	ec_recheck_abandoned_building = { building = building_wheat_farm number = 18 }
	ec_recheck_abandoned_building = { building = building_rye_farm number = 19 }
	ec_recheck_abandoned_building = { building = building_rice_farm number = 20 }
	ec_recheck_abandoned_building = { building = building_maize_farm number = 21 }
	ec_recheck_abandoned_building = { building = building_millet_farm number = 22 }
	ec_recheck_abandoned_building = { building = building_livestock_ranch number = 23 }
	ec_recheck_abandoned_building = { building = building_cotton_plantation number = 24 }
	ec_recheck_abandoned_building = { building = building_dye_plantation number = 25 }
	ec_recheck_abandoned_building = { building = building_silk_plantation number = 26 }
	ec_recheck_abandoned_building = { building = building_banana_plantation number = 27 }
	ec_recheck_abandoned_building = { building = building_sugar_plantation number = 28 }
	ec_recheck_abandoned_building = { building = building_tea_plantation number = 29 }
	ec_recheck_abandoned_building = { building = building_coffee_plantation number = 30 }
	ec_recheck_abandoned_building = { building = building_tobacco_plantation number = 31 }
	ec_recheck_abandoned_building = { building = building_opium_plantation number = 32 }
	ec_recheck_abandoned_building = { building = building_food_industry number = 33 }
	ec_recheck_abandoned_building = { building = building_arts_academy number = 34 }
	ec_recheck_abandoned_building = { building = building_textile_mills number = 35 }
	ec_recheck_abandoned_building = { building = building_furniture_manufacturies number = 36 }
	ec_recheck_abandoned_building = { building = building_glassworks number = 37 }
	ec_recheck_abandoned_building = { building = building_tooling_workshops number = 38 }
	ec_recheck_abandoned_building = { building = building_paper_mills number = 39 }
	ec_recheck_abandoned_building = { building = building_chemical_plants number = 40 }
	ec_recheck_abandoned_building = { building = building_synthetics_plants number = 41 }
	ec_recheck_abandoned_building = { building = building_steel_mills number = 42 }
	ec_recheck_abandoned_building = { building = building_motor_industry number = 43 }
	ec_recheck_abandoned_building = { building = building_power_plant number = 44 }
	ec_recheck_abandoned_building = { building = building_shipyards number = 45 }
	ec_recheck_abandoned_building = { building = building_arms_industry number = 46 }
	ec_recheck_abandoned_building = { building = building_munition_plants number = 47 }
	ec_recheck_abandoned_building = { building = building_electrics_industry number = 48 }
	ec_recheck_abandoned_building = { building = building_war_machine_industry number = 49 }
	cp_sanitize_abandoned_buildings = yes
}

ec_recheck_abandoned_building = {
	if = {
		limit = {
			has_variable = ec$number$ia
			NOT = {
				any_scope_building = {
					is_building_type = $building$
				}
			}
		}
		remove_variable = ec$number$ia
	}
}

ec_clear_excessive_variables = {
	ec_clear_excessive_production = { number = 8 }
	ec_clear_excessive_production = { number = 9 }
	ec_clear_excessive_production = { number = 10 }
	ec_clear_excessive_production = { number = 11 }
	ec_clear_excessive_production = { number = 12 }
	ec_clear_excessive_production = { number = 13 }
	ec_clear_excessive_production = { number = 14 }
	ec_clear_excessive_production = { number = 15 }
	ec_clear_excessive_production = { number = 16 }
	ec_clear_excessive_production = { number = 18 }
	ec_clear_excessive_production = { number = 19 }
	ec_clear_excessive_production = { number = 20 }
	ec_clear_excessive_production = { number = 21 }
	ec_clear_excessive_production = { number = 22 }
	ec_clear_excessive_production = { number = 23 }
	ec_clear_excessive_production = { number = 24 }
	ec_clear_excessive_production = { number = 25 }
	ec_clear_excessive_production = { number = 26 }
	ec_clear_excessive_production = { number = 27 }
	ec_clear_excessive_production = { number = 28 }
	ec_clear_excessive_production = { number = 29 }
	ec_clear_excessive_production = { number = 30 }
	ec_clear_excessive_production = { number = 31 }
	ec_clear_excessive_production = { number = 32 }
	ec_clear_excessive_production = { number = 33 }
	ec_clear_excessive_production = { number = 34 }
	ec_clear_excessive_production = { number = 35 }
	ec_clear_excessive_production = { number = 36 }
	ec_clear_excessive_production = { number = 37 }
	ec_clear_excessive_production = { number = 38 }
	ec_clear_excessive_production = { number = 39 }
	ec_clear_excessive_production = { number = 40 }
	ec_clear_excessive_production = { number = 41 }
	ec_clear_excessive_production = { number = 42 }
	ec_clear_excessive_production = { number = 43 }
	ec_clear_excessive_production = { number = 44 }
	ec_clear_excessive_production = { number = 45 }
	ec_clear_excessive_production = { number = 46 }
	ec_clear_excessive_production = { number = 47 }
	ec_clear_excessive_production = { number = 48 }
	ec_clear_excessive_production = { number = 49 }
	cp_clear_excessive_variables = yes
}

ec_clear_excessive_production = {
	remove_variable = ecep$number$
}

ec_downsize_production_buildings = {
	ec_perform_production_downsizing = { building = building_logging_camp number = 8 }
	ec_perform_production_downsizing = { building = building_fishing_wharf number = 9 }
	ec_perform_production_downsizing = { building = building_whaling_station number = 10 }
	ec_perform_production_downsizing = { building = building_coal_mine number = 11 }
	ec_perform_production_downsizing = { building = building_iron_mine number = 12 }
	ec_perform_production_downsizing = { building = building_lead_mine number = 13 }
	ec_perform_production_downsizing = { building = building_sulfur_mine number = 14 }
	ec_perform_production_downsizing = { building = building_gold_mine number = 15 }
	ec_perform_production_downsizing = { building = building_rubber_plantation number = 16 }
	ec_perform_production_downsizing = { building = building_wheat_farm number = 18 }
	ec_perform_production_downsizing = { building = building_rye_farm number = 19 }
	ec_perform_production_downsizing = { building = building_rice_farm number = 20 }
	ec_perform_production_downsizing = { building = building_maize_farm number = 21 }
	ec_perform_production_downsizing = { building = building_millet_farm number = 22 }
	ec_perform_production_downsizing = { building = building_livestock_ranch number = 23 }
	ec_perform_production_downsizing = { building = building_cotton_plantation number = 24 }
	ec_perform_production_downsizing = { building = building_dye_plantation number = 25 }
	ec_perform_production_downsizing = { building = building_silk_plantation number = 26 }
	ec_perform_production_downsizing = { building = building_banana_plantation number = 27 }
	ec_perform_production_downsizing = { building = building_sugar_plantation number = 28 }
	ec_perform_production_downsizing = { building = building_tea_plantation number = 29 }
	ec_perform_production_downsizing = { building = building_coffee_plantation number = 30 }
	ec_perform_production_downsizing = { building = building_tobacco_plantation number = 31 }
	ec_perform_production_downsizing = { building = building_opium_plantation number = 32 }
	ec_perform_production_downsizing = { building = building_food_industry number = 33 }
	ec_perform_production_downsizing = { building = building_arts_academy number = 34 }
	ec_perform_production_downsizing = { building = building_textile_mills number = 35 }
	ec_perform_production_downsizing = { building = building_furniture_manufacturies number = 36 }
	ec_perform_production_downsizing = { building = building_glassworks number = 37 }
	ec_perform_production_downsizing = { building = building_tooling_workshops number = 38 }
	ec_perform_production_downsizing = { building = building_paper_mills number = 39 }
	ec_perform_production_downsizing = { building = building_chemical_plants number = 40 }
	ec_perform_production_downsizing = { building = building_synthetics_plants number = 41 }
	ec_perform_production_downsizing = { building = building_steel_mills number = 42 }
	ec_perform_production_downsizing = { building = building_motor_industry number = 43 }
	ec_perform_production_downsizing = { building = building_power_plant number = 44 }
	ec_perform_production_downsizing = { building = building_shipyards number = 45 }
	ec_perform_production_downsizing = { building = building_arms_industry number = 46 }
	ec_perform_production_downsizing = { building = building_munition_plants number = 47 }
	ec_perform_production_downsizing = { building = building_electrics_industry number = 48 }
	ec_perform_production_downsizing = { building = building_war_machine_industry number = 49 }
	cp_downsize_production_buildings = yes
}

ec_perform_production_downsizing = {
	ordered_scope_state = {
		limit = {
			has_variable = ec$number$ia
			var:ec$number$ia >= 100000
		}
		order_by = {
			value = 200000
			subtract = var:ec$number$ia
		}
		position = 0
		remove_building = $building$
		remove_variable = ec$number$ia
	}
}

ec_clear_abandoned_variables = {
	ec_clear_abandoned_building = { number = 8 }
	ec_clear_abandoned_building = { number = 9 }
	ec_clear_abandoned_building = { number = 10 }
	ec_clear_abandoned_building = { number = 11 }
	ec_clear_abandoned_building = { number = 12 }
	ec_clear_abandoned_building = { number = 13 }
	ec_clear_abandoned_building = { number = 14 }
	ec_clear_abandoned_building = { number = 15 }
	ec_clear_abandoned_building = { number = 16 }
	ec_clear_abandoned_building = { number = 18 }
	ec_clear_abandoned_building = { number = 19 }
	ec_clear_abandoned_building = { number = 20 }
	ec_clear_abandoned_building = { number = 21 }
	ec_clear_abandoned_building = { number = 22 }
	ec_clear_abandoned_building = { number = 23 }
	ec_clear_abandoned_building = { number = 24 }
	ec_clear_abandoned_building = { number = 25 }
	ec_clear_abandoned_building = { number = 26 }
	ec_clear_abandoned_building = { number = 27 }
	ec_clear_abandoned_building = { number = 28 }
	ec_clear_abandoned_building = { number = 29 }
	ec_clear_abandoned_building = { number = 30 }
	ec_clear_abandoned_building = { number = 31 }
	ec_clear_abandoned_building = { number = 32 }
	ec_clear_abandoned_building = { number = 33 }
	ec_clear_abandoned_building = { number = 34 }
	ec_clear_abandoned_building = { number = 35 }
	ec_clear_abandoned_building = { number = 36 }
	ec_clear_abandoned_building = { number = 37 }
	ec_clear_abandoned_building = { number = 38 }
	ec_clear_abandoned_building = { number = 39 }
	ec_clear_abandoned_building = { number = 40 }
	ec_clear_abandoned_building = { number = 41 }
	ec_clear_abandoned_building = { number = 42 }
	ec_clear_abandoned_building = { number = 43 }
	ec_clear_abandoned_building = { number = 44 }
	ec_clear_abandoned_building = { number = 45 }
	ec_clear_abandoned_building = { number = 46 }
	ec_clear_abandoned_building = { number = 47 }
	ec_clear_abandoned_building = { number = 48 }
	ec_clear_abandoned_building = { number = 49 }
	cp_clear_abandoned_variables = yes
}

ec_clear_abandoned_building = {
	remove_variable = ec$number$ia
}

ec_prepare_data_for_construction = {
	ec_country_level_building_analysis = yes
	ec_state_level_building_analysis = yes
	ec_create_building_priority_arrays = yes
}

ec_country_level_building_analysis = {
	ec_check_priority_of_building = { building = building_government_administration number = 1 dynamic = 0 importance = 9 } 
	ec_check_priority_of_building = { building = building_construction_sector number = 2 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_university number = 3 dynamic = 0 importance = 7 } 
	ec_check_priority_of_building = { building = building_railway number = 4 dynamic = 1 importance = 99 } 
	ec_check_priority_of_building = { building = building_port number = 5 dynamic = 1 importance = 99 } 
	ec_check_priority_of_building = { building = building_barracks number = 6 dynamic = 0 importance = 7 } 
	ec_check_priority_of_building = { building = building_naval_base number = 7 dynamic = 0 importance = 7 } 
	ec_check_priority_of_building = { building = building_logging_camp number = 8 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_fishing_wharf number = 9 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_whaling_station number = 10 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_coal_mine number = 11 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_iron_mine number = 12 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_lead_mine number = 13 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_sulfur_mine number = 14 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_gold_mine number = 15 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_rubber_plantation number = 16 dynamic = 0 importance = 11 } 
	ec_check_priority_of_building = { building = building_oil_rig number = 17 dynamic = 0 importance = 11 } 
	ec_check_priority_of_building = { building = building_wheat_farm number = 18 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_rye_farm number = 19 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_rice_farm number = 20 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_maize_farm number = 21 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_millet_farm number = 22 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_livestock_ranch number = 23 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_cotton_plantation number = 24 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_dye_plantation number = 25 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_silk_plantation number = 26 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_banana_plantation number = 27 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_sugar_plantation number = 28 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_tea_plantation number = 29 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_coffee_plantation number = 30 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_tobacco_plantation number = 31 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_opium_plantation number = 32 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_food_industry number = 33 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_arts_academy number = 34 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_textile_mills number = 35 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_furniture_manufacturies number = 36 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_glassworks number = 37 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_tooling_workshops number = 38 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_paper_mills number = 39 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_chemical_plants number = 40 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_synthetics_plants number = 41 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_steel_mills number = 42 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_motor_industry number = 43 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_power_plant number = 44 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_shipyards number = 45 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_arms_industry number = 46 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_munition_plants number = 47 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_electrics_industry number = 48 dynamic = 0 importance = 5 } 
	ec_check_priority_of_building = { building = building_war_machine_industry number = 49 dynamic = 0 importance = 5 } 
	cp_country_level_building_analysis = yes
}

ec_check_priority_of_building = {
	if = {
		limit = {
			ec_consider_$building$ = yes
			OR = {
				$dynamic$ = 1
				any_in_global_list = {
					variable = ecbta
					trigger_if = {
						limit = {
							var:ecbtn = $number$
						}
						save_temporary_scope_as = ec_current_building
						NOT = {
							any_in_global_list = {
								variable = ecbta
								trigger_if = {
									limit = {
										var:ecbtc = ec_current_ecbtc
									}
									save_temporary_scope_as = ec_counter_building
									trigger_if = {
										limit = {
											var:ecbtn = $number$
										}
										ec_building_is_under_construction = {
											building = $building$
										}
									}
									trigger_else = {
										ec_number_is_under_construction = {
											number = ec_counter_ecbtn
										}
									}
								}
								trigger_else = {
									always = no
								}
							}
						}
					}
					trigger_else = {
						always = no
					}
				}
			}
		}
		if = { limit = { OR = { $importance$ >= 1 has_variable_list = ec_suitable_states_1 } ec_evaluate_$building$ = { priority = 1 } } set_variable = { name = ecpb$number$ value = 1 } } 
		else_if = { limit = { OR = { $importance$ >= 2 has_variable_list = ec_suitable_states_1 } ec_evaluate_$building$ = { priority = 2 } } set_variable = { name = ecpb$number$ value = 2 } } 
		else_if = { limit = { OR = { $importance$ >= 3 has_variable_list = ec_suitable_states_1 } ec_evaluate_$building$ = { priority = 3 } } set_variable = { name = ecpb$number$ value = 3 } } 
		else_if = { limit = { OR = { $importance$ >= 4 has_variable_list = ec_suitable_states_1 } ec_evaluate_$building$ = { priority = 4 } } set_variable = { name = ecpb$number$ value = 4 } } 
		else_if = { limit = { OR = { $importance$ >= 5 has_variable_list = ec_suitable_states_1 } ec_evaluate_$building$ = { priority = 5 } } set_variable = { name = ecpb$number$ value = 5 } } 
		else_if = { limit = { OR = { $importance$ >= 6 has_variable_list = ec_suitable_states_1 } ec_evaluate_$building$ = { priority = 6 } } set_variable = { name = ecpb$number$ value = 6 } } 
		else_if = { limit = { OR = { $importance$ >= 7 has_variable_list = ec_suitable_states_1 } ec_evaluate_$building$ = { priority = 7 } } set_variable = { name = ecpb$number$ value = 7 } } 
		else_if = { limit = { OR = { $importance$ >= 8 has_variable_list = ec_suitable_states_1 } ec_evaluate_$building$ = { priority = 8 } } set_variable = { name = ecpb$number$ value = 8 } } 
		else_if = { limit = { OR = { $importance$ >= 9 has_variable_list = ec_suitable_states_1 } ec_evaluate_$building$ = { priority = 9 } } set_variable = { name = ecpb$number$ value = 9 } } 
		else_if = { limit = { OR = { $importance$ >= 10 has_variable_list = ec_suitable_states_1 } ec_evaluate_$building$ = { priority = 10 } } set_variable = { name = ecpb$number$ value = 10 } } 
		else_if = { limit = { OR = { $importance$ >= 11 has_variable_list = ec_suitable_states_1 } ec_evaluate_$building$ = { priority = 11 } } set_variable = { name = ecpb$number$ value = 11 } } 
		else_if = { limit = { OR = { $importance$ >= 12 has_variable_list = ec_suitable_states_1 } ec_evaluate_$building$ = { priority = 12 } } set_variable = { name = ecpb$number$ value = 12 } } 
		else_if = { limit = { OR = { $importance$ >= 13 has_variable_list = ec_suitable_states_1 } ec_evaluate_$building$ = { priority = 13 } } set_variable = { name = ecpb$number$ value = 13 } } 
		else_if = { limit = { OR = { $importance$ >= 14 has_variable_list = ec_suitable_states_1 } ec_evaluate_$building$ = { priority = 14 } } set_variable = { name = ecpb$number$ value = 14 } } 
		else_if = { limit = { OR = { $importance$ >= 15 has_variable_list = ec_suitable_states_1 } ec_evaluate_$building$ = { priority = 15 } } set_variable = { name = ecpb$number$ value = 15 } } 
		else_if = { limit = { OR = { $importance$ >= 16 has_variable_list = ec_suitable_states_1 } ec_evaluate_$building$ = { priority = 16 } } set_variable = { name = ecpb$number$ value = 16 } } 
		else_if = { limit = { OR = { $importance$ >= 17 has_variable_list = ec_suitable_states_1 } ec_evaluate_$building$ = { priority = 17 } } set_variable = { name = ecpb$number$ value = 17 } } 
		else_if = { limit = { OR = { $importance$ >= 18 has_variable_list = ec_suitable_states_1 } ec_evaluate_$building$ = { priority = 18 } } set_variable = { name = ecpb$number$ value = 18 } } 
	}
}

ec_state_level_building_analysis = {
	every_scope_state = {
		limit = {
			has_variable = ec_available_workforce
			state_region = {
				has_variable = ecaar
			}
		}
		ec_decipher_arable_resources = yes
		ec_manage_building_allocation = { building = building_government_administration number = 1 counter = 1 factor = 3 dynamic = 0 singular = 0 depth = 4 importance = 9 }
		ec_manage_building_allocation = { building = building_construction_sector number = 2 counter = 2 factor = 4 dynamic = 0 singular = 0 depth = 1 importance = 5 }
		ec_manage_building_allocation = { building = building_university number = 3 counter = 3 factor = 3 dynamic = 0 singular = 0 depth = 1 importance = 7 }
		ec_manage_building_allocation = { building = building_railway number = 4 counter = 4 factor = 5 dynamic = 1 singular = 1 depth = 7 importance = 99 }
		ec_manage_building_allocation = { building = building_port number = 5 counter = 5 factor = 3 dynamic = 1 singular = 1 depth = 4 importance = 99 }
		ec_manage_building_allocation = { building = building_barracks number = 6 counter = 6 factor = 7 dynamic = 0 singular = 0 depth = 2 importance = 7 }
		ec_manage_building_allocation = { building = building_naval_base number = 7 counter = 7 factor = 5 dynamic = 0 singular = 0 depth = 2 importance = 7 }
		ec_manage_building_allocation = { building = building_logging_camp number = 8 counter = 8 factor = 5 dynamic = 0 singular = 0 depth = 2 importance = 5 }
		ec_manage_building_allocation = { building = building_fishing_wharf number = 9 counter = 9 factor = 5 dynamic = 0 singular = 0 depth = 2 importance = 5 }
		ec_manage_building_allocation = { building = building_whaling_station number = 10 counter = 10 factor = 5 dynamic = 0 singular = 0 depth = 2 importance = 5 }
		ec_manage_building_allocation = { building = building_coal_mine number = 11 counter = 11 factor = 5 dynamic = 0 singular = 0 depth = 2 importance = 5 }
		ec_manage_building_allocation = { building = building_iron_mine number = 12 counter = 12 factor = 5 dynamic = 0 singular = 0 depth = 2 importance = 5 }
		ec_manage_building_allocation = { building = building_lead_mine number = 13 counter = 13 factor = 5 dynamic = 0 singular = 0 depth = 2 importance = 5 }
		ec_manage_building_allocation = { building = building_sulfur_mine number = 14 counter = 14 factor = 5 dynamic = 0 singular = 0 depth = 2 importance = 5 }
		ec_manage_building_allocation = { building = building_gold_mine number = 15 counter = 15 factor = 5 dynamic = 0 singular = 0 depth = 2 importance = 5 }
		ec_manage_building_allocation = { building = building_rubber_plantation number = 16 counter = 16 factor = 5 dynamic = 0 singular = 0 depth = 2 importance = 11 }
		ec_manage_building_allocation = { building = building_oil_rig number = 17 counter = 17 factor = 5 dynamic = 0 singular = 0 depth = 2 importance = 11 }
		ec_manage_building_allocation = { building = building_wheat_farm number = 18 counter = 18 factor = 5 dynamic = 0 singular = 0 depth = 2 importance = 5 }
		ec_manage_building_allocation = { building = building_rye_farm number = 19 counter = 18 factor = 5 dynamic = 0 singular = 0 depth = 2 importance = 5 }
		ec_manage_building_allocation = { building = building_rice_farm number = 20 counter = 18 factor = 5 dynamic = 0 singular = 0 depth = 2 importance = 5 }
		ec_manage_building_allocation = { building = building_maize_farm number = 21 counter = 18 factor = 5 dynamic = 0 singular = 0 depth = 2 importance = 5 }
		ec_manage_building_allocation = { building = building_millet_farm number = 22 counter = 18 factor = 5 dynamic = 0 singular = 0 depth = 2 importance = 5 }
		ec_manage_building_allocation = { building = building_livestock_ranch number = 23 counter = 23 factor = 5 dynamic = 0 singular = 0 depth = 2 importance = 5 }
		ec_manage_building_allocation = { building = building_cotton_plantation number = 24 counter = 23 factor = 5 dynamic = 0 singular = 0 depth = 2 importance = 5 }
		ec_manage_building_allocation = { building = building_dye_plantation number = 25 counter = 25 factor = 5 dynamic = 0 singular = 0 depth = 2 importance = 5 }
		ec_manage_building_allocation = { building = building_silk_plantation number = 26 counter = 26 factor = 5 dynamic = 0 singular = 0 depth = 2 importance = 5 }
		ec_manage_building_allocation = { building = building_banana_plantation number = 27 counter = 27 factor = 5 dynamic = 0 singular = 0 depth = 2 importance = 5 }
		ec_manage_building_allocation = { building = building_sugar_plantation number = 28 counter = 28 factor = 5 dynamic = 0 singular = 0 depth = 2 importance = 5 }
		ec_manage_building_allocation = { building = building_tea_plantation number = 29 counter = 29 factor = 5 dynamic = 0 singular = 0 depth = 2 importance = 5 }
		ec_manage_building_allocation = { building = building_coffee_plantation number = 30 counter = 30 factor = 5 dynamic = 0 singular = 0 depth = 2 importance = 5 }
		ec_manage_building_allocation = { building = building_tobacco_plantation number = 31 counter = 31 factor = 5 dynamic = 0 singular = 0 depth = 2 importance = 5 }
		ec_manage_building_allocation = { building = building_opium_plantation number = 32 counter = 32 factor = 5 dynamic = 0 singular = 0 depth = 2 importance = 5 }
		ec_manage_building_allocation = { building = building_food_industry number = 33 counter = 33 factor = 5 dynamic = 0 singular = 0 depth = 1 importance = 5 }
		ec_manage_building_allocation = { building = building_arts_academy number = 34 counter = 34 factor = 5 dynamic = 0 singular = 0 depth = 1 importance = 5 }
		ec_manage_building_allocation = { building = building_textile_mills number = 35 counter = 35 factor = 5 dynamic = 0 singular = 0 depth = 1 importance = 5 }
		ec_manage_building_allocation = { building = building_furniture_manufacturies number = 36 counter = 36 factor = 5 dynamic = 0 singular = 0 depth = 1 importance = 5 }
		ec_manage_building_allocation = { building = building_glassworks number = 37 counter = 37 factor = 5 dynamic = 0 singular = 0 depth = 1 importance = 5 }
		ec_manage_building_allocation = { building = building_tooling_workshops number = 38 counter = 38 factor = 5 dynamic = 0 singular = 0 depth = 1 importance = 5 }
		ec_manage_building_allocation = { building = building_paper_mills number = 39 counter = 39 factor = 5 dynamic = 0 singular = 0 depth = 1 importance = 5 }
		ec_manage_building_allocation = { building = building_chemical_plants number = 40 counter = 25 factor = 5 dynamic = 0 singular = 0 depth = 1 importance = 5 }
		ec_manage_building_allocation = { building = building_synthetics_plants number = 41 counter = 41 factor = 5 dynamic = 0 singular = 0 depth = 1 importance = 5 }
		ec_manage_building_allocation = { building = building_steel_mills number = 42 counter = 42 factor = 5 dynamic = 0 singular = 0 depth = 1 importance = 5 }
		ec_manage_building_allocation = { building = building_motor_industry number = 43 counter = 43 factor = 5 dynamic = 0 singular = 0 depth = 1 importance = 5 }
		ec_manage_building_allocation = { building = building_power_plant number = 44 counter = 44 factor = 5 dynamic = 0 singular = 0 depth = 1 importance = 5 }
		ec_manage_building_allocation = { building = building_shipyards number = 45 counter = 45 factor = 5 dynamic = 0 singular = 0 depth = 1 importance = 5 }
		ec_manage_building_allocation = { building = building_arms_industry number = 46 counter = 46 factor = 5 dynamic = 0 singular = 0 depth = 1 importance = 5 }
		ec_manage_building_allocation = { building = building_munition_plants number = 47 counter = 47 factor = 5 dynamic = 0 singular = 0 depth = 1 importance = 5 }
		ec_manage_building_allocation = { building = building_electrics_industry number = 48 counter = 48 factor = 5 dynamic = 0 singular = 0 depth = 1 importance = 5 }
		ec_manage_building_allocation = { building = building_war_machine_industry number = 49 counter = 49 factor = 5 dynamic = 0 singular = 0 depth = 1 importance = 5 }
		cp_state_level_building_analysis = yes
		ec_clear_decipher_variables = yes
	}
}

ec_manage_building_allocation = {
	if = {
		limit = {
			root = {
				has_variable = ecpb$number$
			}
		}
		root = {
			if = {
				limit = {
					$dynamic$ = 1
					NOT = {
						has_variable = eccb$counter$
					}
				}
				set_variable = {
					name = eccb$counter$
					value = 0
				}
			}
		}
		if = {
			limit = {
				$dynamic$ = 1
				any_scope_building = {
					is_building_type = $building$
					is_under_construction = yes
				}
				OR = {
					always = yes
					$singular$ = 1
				}
			}
			root = {
				change_variable = {
					name = eccb$counter$
					add = 1
				}
				if = {
					limit = {
						NOT = {
							ec_check_if_counter_is_within_limit = {
								counter = $counter$
								factor = $factor$
								priority = var:ecpb$number$
							}
						}
					}
					remove_variable = eccb$counter$
					remove_variable = ecpb$number$
					clear_variable_list = ecb$number$a1
					clear_variable_list = ecb$number$a2
					clear_variable_list = ecb$number$a3
					clear_variable_list = ecb$number$a4
					clear_variable_list = ecb$number$a5
					clear_variable_list = ecb$number$a6
					clear_variable_list = ecb$number$a7
					clear_variable_list = ecb$number$a8
					clear_variable_list = ecb$number$a9
					clear_variable_list = ecb$number$a10
				}
			}
		}
		else_if = {
			limit = {
				ec_sanction_$building$ = yes
				OR = {
					$importance$ = 99
					AND = {
						root = {
							var:ecpb$number$ <= $importance$
						}
						ec_check_if_state_is_suitable = {
							criteria = 1
						}
					}
					AND = {
						root = {
							var:ecpb$number$ > $importance$
						}
						ec_check_if_state_is_suitable = {
							criteria = 2
						}
					}
				}
			}
			if = { limit = { $depth$ >= 1 ec_allocate_$building$ = { priority = 1 } } root = { add_to_variable_list = { name = ecb$number$a1 target = prev } } } else_if = { limit = { $depth$ >= 2 ec_allocate_$building$ = { priority = 2 } } root = { add_to_variable_list = { name = ecb$number$a2 target = prev } } } else_if = { limit = { $depth$ >= 3 ec_allocate_$building$ = { priority = 3 } } root = { add_to_variable_list = { name = ecb$number$a3 target = prev } } } else_if = { limit = { $depth$ >= 4 ec_allocate_$building$ = { priority = 4 } } root = { add_to_variable_list = { name = ecb$number$a4 target = prev } } } else_if = { limit = { $depth$ >= 5 ec_allocate_$building$ = { priority = 5 } } root = { add_to_variable_list = { name = ecb$number$a5 target = prev } } } else_if = { limit = { $depth$ >= 6 ec_allocate_$building$ = { priority = 6 } } root = { add_to_variable_list = { name = ecb$number$a6 target = prev } } } else_if = { limit = { $depth$ >= 7 ec_allocate_$building$ = { priority = 7 } } root = { add_to_variable_list = { name = ecb$number$a7 target = prev } } } else_if = { limit = { $depth$ >= 8 ec_allocate_$building$ = { priority = 8 } } root = { add_to_variable_list = { name = ecb$number$a8 target = prev } } } else_if = { limit = { $depth$ >= 9 ec_allocate_$building$ = { priority = 9 } } root = { add_to_variable_list = { name = ecb$number$a9 target = prev } } } else_if = { limit = { $depth$ >= 10 ec_allocate_$building$ = { priority = 10 } } root = { add_to_variable_list = { name = ecb$number$a10 target = prev } } } 
		}
	}
}

ec_create_building_priority_arrays = {
	ec_add_building_to_priority_array = { number = 1 }
	ec_add_building_to_priority_array = { number = 2 }
	ec_add_building_to_priority_array = { number = 3 }
	ec_add_building_to_priority_array = { number = 4 }
	ec_add_building_to_priority_array = { number = 5 }
	ec_add_building_to_priority_array = { number = 6 }
	ec_add_building_to_priority_array = { number = 7 }
	ec_add_building_to_priority_array = { number = 8 }
	ec_add_building_to_priority_array = { number = 9 }
	ec_add_building_to_priority_array = { number = 10 }
	ec_add_building_to_priority_array = { number = 11 }
	ec_add_building_to_priority_array = { number = 12 }
	ec_add_building_to_priority_array = { number = 13 }
	ec_add_building_to_priority_array = { number = 14 }
	ec_add_building_to_priority_array = { number = 15 }
	ec_add_building_to_priority_array = { number = 16 }
	ec_add_building_to_priority_array = { number = 17 }
	ec_add_building_to_priority_array = { number = 18 }
	ec_add_building_to_priority_array = { number = 19 }
	ec_add_building_to_priority_array = { number = 20 }
	ec_add_building_to_priority_array = { number = 21 }
	ec_add_building_to_priority_array = { number = 22 }
	ec_add_building_to_priority_array = { number = 23 }
	ec_add_building_to_priority_array = { number = 24 }
	ec_add_building_to_priority_array = { number = 25 }
	ec_add_building_to_priority_array = { number = 26 }
	ec_add_building_to_priority_array = { number = 27 }
	ec_add_building_to_priority_array = { number = 28 }
	ec_add_building_to_priority_array = { number = 29 }
	ec_add_building_to_priority_array = { number = 30 }
	ec_add_building_to_priority_array = { number = 31 }
	ec_add_building_to_priority_array = { number = 32 }
	ec_add_building_to_priority_array = { number = 33 }
	ec_add_building_to_priority_array = { number = 34 }
	ec_add_building_to_priority_array = { number = 35 }
	ec_add_building_to_priority_array = { number = 36 }
	ec_add_building_to_priority_array = { number = 37 }
	ec_add_building_to_priority_array = { number = 38 }
	ec_add_building_to_priority_array = { number = 39 }
	ec_add_building_to_priority_array = { number = 40 }
	ec_add_building_to_priority_array = { number = 41 }
	ec_add_building_to_priority_array = { number = 42 }
	ec_add_building_to_priority_array = { number = 43 }
	ec_add_building_to_priority_array = { number = 44 }
	ec_add_building_to_priority_array = { number = 45 }
	ec_add_building_to_priority_array = { number = 46 }
	ec_add_building_to_priority_array = { number = 47 }
	ec_add_building_to_priority_array = { number = 48 }
	ec_add_building_to_priority_array = { number = 49 }
	cp_create_building_priority_arrays = yes
}

ec_add_building_to_priority_array = { root = { if = { limit = { OR = { has_variable_list = ecb$number$a1 has_variable_list = ecb$number$a2 has_variable_list = ecb$number$a3 has_variable_list = ecb$number$a4 has_variable_list = ecb$number$a5 has_variable_list = ecb$number$a6 has_variable_list = ecb$number$a7 has_variable_list = ecb$number$a8 has_variable_list = ecb$number$a9 has_variable_list = ecb$number$a10 } } random_in_global_list = { variable = ecbta limit = { var:ecbtn = $number$ } save_scope_as = ec_current_building } if = { limit = { var:ecpb$number$ = 1 } add_to_variable_list = { name = ecpa1 target = scope:ec_current_building } } else_if = { limit = { var:ecpb$number$ = 2 } add_to_variable_list = { name = ecpa2 target = scope:ec_current_building } } else_if = { limit = { var:ecpb$number$ = 3 } add_to_variable_list = { name = ecpa3 target = scope:ec_current_building } } else_if = { limit = { var:ecpb$number$ = 4 } add_to_variable_list = { name = ecpa4 target = scope:ec_current_building } } else_if = { limit = { var:ecpb$number$ = 5 } add_to_variable_list = { name = ecpa5 target = scope:ec_current_building } } else_if = { limit = { var:ecpb$number$ = 6 } add_to_variable_list = { name = ecpa6 target = scope:ec_current_building } } else_if = { limit = { var:ecpb$number$ = 7 } add_to_variable_list = { name = ecpa7 target = scope:ec_current_building } } else_if = { limit = { var:ecpb$number$ = 8 } add_to_variable_list = { name = ecpa8 target = scope:ec_current_building } } else_if = { limit = { var:ecpb$number$ = 9 } add_to_variable_list = { name = ecpa9 target = scope:ec_current_building } } else_if = { limit = { var:ecpb$number$ = 10 } add_to_variable_list = { name = ecpa10 target = scope:ec_current_building } } else_if = { limit = { var:ecpb$number$ = 11 } add_to_variable_list = { name = ecpa11 target = scope:ec_current_building } } else_if = { limit = { var:ecpb$number$ = 12 } add_to_variable_list = { name = ecpa12 target = scope:ec_current_building } } else_if = { limit = { var:ecpb$number$ = 13 } add_to_variable_list = { name = ecpa13 target = scope:ec_current_building } } else_if = { limit = { var:ecpb$number$ = 14 } add_to_variable_list = { name = ecpa14 target = scope:ec_current_building } } else_if = { limit = { var:ecpb$number$ = 15 } add_to_variable_list = { name = ecpa15 target = scope:ec_current_building } } else_if = { limit = { var:ecpb$number$ = 16 } add_to_variable_list = { name = ecpa16 target = scope:ec_current_building } } else_if = { limit = { var:ecpb$number$ = 17 } add_to_variable_list = { name = ecpa17 target = scope:ec_current_building } } else_if = { limit = { var:ecpb$number$ = 18 } add_to_variable_list = { name = ecpa18 target = scope:ec_current_building } } clear_saved_scope = ec_current_building } } }

ec_prepare_building_construction = {
	if = { limit = { has_variable_list = ecpa1 variable_list_size = { name = ecpa1 value > 0 } } ec_choose_building_to_construct = { priority = 1 } }
	else_if = { limit = { has_variable_list = ecpa2 variable_list_size = { name = ecpa2 value > 0 } } ec_choose_building_to_construct = { priority = 2 } }
	else_if = { limit = { has_variable_list = ecpa3 variable_list_size = { name = ecpa3 value > 0 } } ec_choose_building_to_construct = { priority = 3 } }
	else_if = { limit = { has_variable_list = ecpa4 variable_list_size = { name = ecpa4 value > 0 } } ec_choose_building_to_construct = { priority = 4 } }
	else_if = { limit = { has_variable_list = ecpa5 variable_list_size = { name = ecpa5 value > 0 } } ec_choose_building_to_construct = { priority = 5 } }
	else_if = { limit = { has_variable_list = ecpa6 variable_list_size = { name = ecpa6 value > 0 } } ec_choose_building_to_construct = { priority = 6 } }
	else_if = { limit = { has_variable_list = ecpa7 variable_list_size = { name = ecpa7 value > 0 } } ec_choose_building_to_construct = { priority = 7 } }
	else_if = { limit = { has_variable_list = ecpa8 variable_list_size = { name = ecpa8 value > 0 } } ec_choose_building_to_construct = { priority = 8 } }
	else_if = { limit = { has_variable_list = ecpa9 variable_list_size = { name = ecpa9 value > 0 } } ec_choose_building_to_construct = { priority = 9 } }
	else_if = { limit = { has_variable_list = ecpa10 variable_list_size = { name = ecpa10 value > 0 } } ec_choose_building_to_construct = { priority = 10 } }
	else_if = { limit = { has_variable_list = ecpa11 variable_list_size = { name = ecpa11 value > 0 } } ec_choose_building_to_construct = { priority = 11 } }
	else_if = { limit = { has_variable_list = ecpa12 variable_list_size = { name = ecpa12 value > 0 } } ec_choose_building_to_construct = { priority = 12 } }
	else_if = { limit = { has_variable_list = ecpa13 variable_list_size = { name = ecpa13 value > 0 } } ec_choose_building_to_construct = { priority = 13 } }
	else_if = { limit = { has_variable_list = ecpa14 variable_list_size = { name = ecpa14 value > 0 } } ec_choose_building_to_construct = { priority = 14 } }
	else_if = { limit = { has_variable_list = ecpa15 variable_list_size = { name = ecpa15 value > 0 } } ec_choose_building_to_construct = { priority = 15 } }
	else_if = { limit = { has_variable_list = ecpa16 variable_list_size = { name = ecpa16 value > 0 } } ec_choose_building_to_construct = { priority = 16 } }
	else_if = { limit = { has_variable_list = ecpa17 variable_list_size = { name = ecpa17 value > 0 } } ec_choose_building_to_construct = { priority = 17 } }
	else_if = { limit = { has_variable_list = ecpa18 variable_list_size = { name = ecpa18 value > 0 } } ec_choose_building_to_construct = { priority = 18 } }
	else = { ec_clear_building_variables = yes }
}

ec_choose_building_to_construct = {
	random_in_list = {
		variable = ecpa$priority$
		limit = {
			save_temporary_scope_as = ec_current_building
			NOT = {
				root = {
					any_in_list = {
						variable = ecpa$priority$
						var:ecbtp < ec_current_ecbtp
					}
				}
			}
		}
		root = {
			ec_collect_building_attributes = {
				number = prev.var:ecbtn
			}
			remove_list_variable = {
				name = ecpa$priority$
				target = prev
			}
		}
	}
	if = {
		limit = {
			var:ec_building_days < 12
		}
		trigger_event = {
			id = ARoAI_economy_events.3
			days = 1
		}
	}
	else = {
		ec_check_construction_points = yes
		if = {
			limit = {
				ec_has_free_construction_points = yes
			}
			ec_prepare_building_construction = yes
		}
		else = {
			ec_clear_building_variables = yes
		}
	}
}

ec_collect_building_attributes = {
	if = { limit = { $number$ = 1 } ec_perform_building_construction = { building = building_government_administration number = 1 dynamic = 0 branching = 0 depth = 4 workforce = 1 importance = 9 arable = 0 counter = 1 factor = 3 scaling = 0 singular = 0 cooldown = 1 } } 
	else_if = { limit = { $number$ = 2 } ec_perform_building_construction = { building = building_construction_sector number = 2 dynamic = 0 branching = 0 depth = 1 workforce = 1 importance = 5 arable = 0 counter = 2 factor = 4 scaling = 0 singular = 0 cooldown = 1 } } 
	else_if = { limit = { $number$ = 3 } ec_perform_building_construction = { building = building_university number = 3 dynamic = 0 branching = 0 depth = 1 workforce = 1 importance = 7 arable = 0 counter = 3 factor = 3 scaling = 0 singular = 0 cooldown = 1 } } 
	else_if = { limit = { $number$ = 4 } ec_perform_building_construction = { building = building_railway number = 4 dynamic = 1 branching = 0 depth = 7 workforce = 0 importance = 99 arable = 0 counter = 4 factor = 5 scaling = 0 singular = 1 cooldown = 0 } } 
	else_if = { limit = { $number$ = 5 } ec_perform_building_construction = { building = building_port number = 5 dynamic = 1 branching = 0 depth = 4 workforce = 0 importance = 99 arable = 0 counter = 5 factor = 3 scaling = 0 singular = 1 cooldown = 1 } } 
	else_if = { limit = { $number$ = 6 } ec_perform_building_construction = { building = building_barracks number = 6 dynamic = 0 branching = 0 depth = 2 workforce = 1 importance = 7 arable = 0 counter = 6 factor = 7 scaling = 0 singular = 0 cooldown = 1 } } 
	else_if = { limit = { $number$ = 7 } ec_perform_building_construction = { building = building_naval_base number = 7 dynamic = 0 branching = 0 depth = 2 workforce = 1 importance = 7 arable = 0 counter = 7 factor = 5 scaling = 0 singular = 0 cooldown = 1 } } 
	else_if = { limit = { $number$ = 8 } ec_perform_building_construction = { building = building_logging_camp number = 8 dynamic = 0 branching = 1 depth = 2 workforce = 1 importance = 5 arable = 0 counter = 8 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 9 } ec_perform_building_construction = { building = building_fishing_wharf number = 9 dynamic = 0 branching = 1 depth = 2 workforce = 1 importance = 5 arable = 0 counter = 9 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 10 } ec_perform_building_construction = { building = building_whaling_station number = 10 dynamic = 0 branching = 1 depth = 2 workforce = 1 importance = 5 arable = 0 counter = 10 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 11 } ec_perform_building_construction = { building = building_coal_mine number = 11 dynamic = 0 branching = 1 depth = 2 workforce = 1 importance = 5 arable = 0 counter = 11 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 12 } ec_perform_building_construction = { building = building_iron_mine number = 12 dynamic = 0 branching = 1 depth = 2 workforce = 1 importance = 5 arable = 0 counter = 12 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 13 } ec_perform_building_construction = { building = building_lead_mine number = 13 dynamic = 0 branching = 1 depth = 2 workforce = 1 importance = 5 arable = 0 counter = 13 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 14 } ec_perform_building_construction = { building = building_sulfur_mine number = 14 dynamic = 0 branching = 1 depth = 2 workforce = 1 importance = 5 arable = 0 counter = 14 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 15 } ec_perform_building_construction = { building = building_gold_mine number = 15 dynamic = 0 branching = 1 depth = 2 workforce = 1 importance = 5 arable = 0 counter = 15 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 16 } ec_perform_building_construction = { building = building_rubber_plantation number = 16 dynamic = 0 branching = 1 depth = 2 workforce = 1 importance = 11 arable = 0 counter = 16 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 17 } ec_perform_building_construction = { building = building_oil_rig number = 17 dynamic = 0 branching = 1 depth = 2 workforce = 1 importance = 11 arable = 0 counter = 17 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 18 } ec_perform_building_construction = { building = building_wheat_farm number = 18 dynamic = 0 branching = 1 depth = 2 workforce = 1 importance = 5 arable = 1 counter = 18 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 19 } ec_perform_building_construction = { building = building_rye_farm number = 19 dynamic = 0 branching = 1 depth = 2 workforce = 1 importance = 5 arable = 1 counter = 18 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 20 } ec_perform_building_construction = { building = building_rice_farm number = 20 dynamic = 0 branching = 1 depth = 2 workforce = 1 importance = 5 arable = 1 counter = 18 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 21 } ec_perform_building_construction = { building = building_maize_farm number = 21 dynamic = 0 branching = 1 depth = 2 workforce = 1 importance = 5 arable = 1 counter = 18 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 22 } ec_perform_building_construction = { building = building_millet_farm number = 22 dynamic = 0 branching = 1 depth = 2 workforce = 1 importance = 5 arable = 1 counter = 18 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 23 } ec_perform_building_construction = { building = building_livestock_ranch number = 23 dynamic = 0 branching = 1 depth = 2 workforce = 1 importance = 5 arable = 1 counter = 23 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 24 } ec_perform_building_construction = { building = building_cotton_plantation number = 24 dynamic = 0 branching = 1 depth = 2 workforce = 1 importance = 5 arable = 1 counter = 23 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 25 } ec_perform_building_construction = { building = building_dye_plantation number = 25 dynamic = 0 branching = 1 depth = 2 workforce = 1 importance = 5 arable = 1 counter = 25 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 26 } ec_perform_building_construction = { building = building_silk_plantation number = 26 dynamic = 0 branching = 1 depth = 2 workforce = 1 importance = 5 arable = 1 counter = 26 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 27 } ec_perform_building_construction = { building = building_banana_plantation number = 27 dynamic = 0 branching = 1 depth = 2 workforce = 1 importance = 5 arable = 1 counter = 27 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 28 } ec_perform_building_construction = { building = building_sugar_plantation number = 28 dynamic = 0 branching = 1 depth = 2 workforce = 1 importance = 5 arable = 1 counter = 28 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 29 } ec_perform_building_construction = { building = building_tea_plantation number = 29 dynamic = 0 branching = 1 depth = 2 workforce = 1 importance = 5 arable = 1 counter = 29 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 30 } ec_perform_building_construction = { building = building_coffee_plantation number = 30 dynamic = 0 branching = 1 depth = 2 workforce = 1 importance = 5 arable = 1 counter = 30 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 31 } ec_perform_building_construction = { building = building_tobacco_plantation number = 31 dynamic = 0 branching = 1 depth = 2 workforce = 1 importance = 5 arable = 1 counter = 31 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 32 } ec_perform_building_construction = { building = building_opium_plantation number = 32 dynamic = 0 branching = 1 depth = 2 workforce = 1 importance = 5 arable = 1 counter = 32 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 33 } ec_perform_building_construction = { building = building_food_industry number = 33 dynamic = 0 branching = 1 depth = 1 workforce = 1 importance = 5 arable = 0 counter = 33 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 34 } ec_perform_building_construction = { building = building_arts_academy number = 34 dynamic = 0 branching = 1 depth = 1 workforce = 1 importance = 5 arable = 0 counter = 34 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 35 } ec_perform_building_construction = { building = building_textile_mills number = 35 dynamic = 0 branching = 1 depth = 1 workforce = 1 importance = 5 arable = 0 counter = 35 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 36 } ec_perform_building_construction = { building = building_furniture_manufacturies number = 36 dynamic = 0 branching = 1 depth = 1 workforce = 1 importance = 5 arable = 0 counter = 36 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 37 } ec_perform_building_construction = { building = building_glassworks number = 37 dynamic = 0 branching = 1 depth = 1 workforce = 1 importance = 5 arable = 0 counter = 37 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 38 } ec_perform_building_construction = { building = building_tooling_workshops number = 38 dynamic = 0 branching = 1 depth = 1 workforce = 1 importance = 5 arable = 0 counter = 38 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 39 } ec_perform_building_construction = { building = building_paper_mills number = 39 dynamic = 0 branching = 1 depth = 1 workforce = 1 importance = 5 arable = 0 counter = 39 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 40 } ec_perform_building_construction = { building = building_chemical_plants number = 40 dynamic = 0 branching = 1 depth = 1 workforce = 1 importance = 5 arable = 0 counter = 25 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 41 } ec_perform_building_construction = { building = building_synthetics_plants number = 41 dynamic = 0 branching = 1 depth = 1 workforce = 1 importance = 5 arable = 0 counter = 41 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 42 } ec_perform_building_construction = { building = building_steel_mills number = 42 dynamic = 0 branching = 1 depth = 1 workforce = 1 importance = 5 arable = 0 counter = 42 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 43 } ec_perform_building_construction = { building = building_motor_industry number = 43 dynamic = 0 branching = 1 depth = 1 workforce = 1 importance = 5 arable = 0 counter = 43 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 44 } ec_perform_building_construction = { building = building_power_plant number = 44 dynamic = 0 branching = 1 depth = 1 workforce = 1 importance = 5 arable = 0 counter = 44 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 45 } ec_perform_building_construction = { building = building_shipyards number = 45 dynamic = 0 branching = 1 depth = 1 workforce = 1 importance = 5 arable = 0 counter = 45 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 46 } ec_perform_building_construction = { building = building_arms_industry number = 46 dynamic = 0 branching = 1 depth = 1 workforce = 1 importance = 5 arable = 0 counter = 46 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 47 } ec_perform_building_construction = { building = building_munition_plants number = 47 dynamic = 0 branching = 1 depth = 1 workforce = 1 importance = 5 arable = 0 counter = 47 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 48 } ec_perform_building_construction = { building = building_electrics_industry number = 48 dynamic = 0 branching = 1 depth = 1 workforce = 1 importance = 5 arable = 0 counter = 48 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else_if = { limit = { $number$ = 49 } ec_perform_building_construction = { building = building_war_machine_industry number = 49 dynamic = 0 branching = 1 depth = 1 workforce = 1 importance = 5 arable = 0 counter = 49 factor = 5 scaling = 1 singular = 0 cooldown = 0 } } 
	else = { cp_collect_building_attributes = { number = $number$ } }
}

ec_perform_building_construction = {
	if = {
		limit = {
			$dynamic$ = 0
			NOT = {
				has_variable = eccb$counter$
			}
		}
		set_variable = {
			name = eccb$counter$
			value = 0
		}
	}
	if = {
		limit = {
			$branching$ = 0
		}
		if = { limit = { has_variable_list = ecb$number$a1 } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$a1 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$a2 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$a2 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$a3 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$a3 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$a4 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$a4 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$a5 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$a5 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$a6 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$a6 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$a7 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$a7 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$a8 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$a8 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$a9 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$a9 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$a10 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$a10 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } 
	}
	else = {
		if = {
			limit = {
				$depth$ = 1
			}
			if = { limit = { has_variable_list = ecb$number$a1 } every_in_list = { variable = ecb$number$a1 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b1 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b2 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b3 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b4 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$b1 } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b1 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b2 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b2 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b3 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b3 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b4 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b4 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } clear_variable_list = ecb$number$b1 clear_variable_list = ecb$number$b2 clear_variable_list = ecb$number$b3 clear_variable_list = ecb$number$b4 
		} 
		if = {
			limit = {
				$depth$ = 2
			}
			if = { limit = { has_variable_list = ecb$number$a1 } every_in_list = { variable = ecb$number$a1 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b1 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b2 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b5 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b6 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a2 } every_in_list = { variable = ecb$number$a2 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b3 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b4 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b7 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b8 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$b1 } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b1 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b2 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b2 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b3 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b3 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b4 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b4 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b5 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b5 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b6 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b6 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b7 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b7 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b8 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b8 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } clear_variable_list = ecb$number$b1 clear_variable_list = ecb$number$b2 clear_variable_list = ecb$number$b3 clear_variable_list = ecb$number$b4 clear_variable_list = ecb$number$b5 clear_variable_list = ecb$number$b6 clear_variable_list = ecb$number$b7 clear_variable_list = ecb$number$b8 
		} 
		if = {
			limit = {
				$depth$ = 3
			}
			if = { limit = { has_variable_list = ecb$number$a1 } every_in_list = { variable = ecb$number$a1 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b1 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b2 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b7 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b8 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a2 } every_in_list = { variable = ecb$number$a2 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b3 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b4 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b9 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b10 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a3 } every_in_list = { variable = ecb$number$a3 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b5 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b6 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b11 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b12 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$b1 } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b1 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b2 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b2 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b3 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b3 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b4 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b4 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b5 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b5 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b6 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b6 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b7 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b7 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b8 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b8 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b9 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b9 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b10 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b10 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b11 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b11 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b12 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b12 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } clear_variable_list = ecb$number$b1 clear_variable_list = ecb$number$b2 clear_variable_list = ecb$number$b3 clear_variable_list = ecb$number$b4 clear_variable_list = ecb$number$b5 clear_variable_list = ecb$number$b6 clear_variable_list = ecb$number$b7 clear_variable_list = ecb$number$b8 clear_variable_list = ecb$number$b9 clear_variable_list = ecb$number$b10 clear_variable_list = ecb$number$b11 clear_variable_list = ecb$number$b12 
		} 
		if = {
			limit = {
				$depth$ = 4
			}
			if = { limit = { has_variable_list = ecb$number$a1 } every_in_list = { variable = ecb$number$a1 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b1 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b2 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b9 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b10 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a2 } every_in_list = { variable = ecb$number$a2 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b3 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b4 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b11 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b12 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a3 } every_in_list = { variable = ecb$number$a3 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b5 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b6 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b13 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b14 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a4 } every_in_list = { variable = ecb$number$a4 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b7 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b8 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b15 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b16 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$b1 } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b1 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b2 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b2 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b3 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b3 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b4 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b4 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b5 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b5 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b6 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b6 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b7 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b7 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b8 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b8 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b9 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b9 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b10 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b10 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b11 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b11 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b12 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b12 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b13 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b13 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b14 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b14 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b15 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b15 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b16 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b16 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } clear_variable_list = ecb$number$b1 clear_variable_list = ecb$number$b2 clear_variable_list = ecb$number$b3 clear_variable_list = ecb$number$b4 clear_variable_list = ecb$number$b5 clear_variable_list = ecb$number$b6 clear_variable_list = ecb$number$b7 clear_variable_list = ecb$number$b8 clear_variable_list = ecb$number$b9 clear_variable_list = ecb$number$b10 clear_variable_list = ecb$number$b11 clear_variable_list = ecb$number$b12 clear_variable_list = ecb$number$b13 clear_variable_list = ecb$number$b14 clear_variable_list = ecb$number$b15 clear_variable_list = ecb$number$b16 
		} 
		if = {
			limit = {
				$depth$ = 5
			}
			if = { limit = { has_variable_list = ecb$number$a1 } every_in_list = { variable = ecb$number$a1 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b1 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b2 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b11 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b12 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a2 } every_in_list = { variable = ecb$number$a2 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b3 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b4 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b13 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b14 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a3 } every_in_list = { variable = ecb$number$a3 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b5 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b6 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b15 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b16 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a4 } every_in_list = { variable = ecb$number$a4 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b7 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b8 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b17 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b18 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a5 } every_in_list = { variable = ecb$number$a5 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b9 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b10 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b19 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b20 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$b1 } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b1 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b2 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b2 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b3 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b3 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b4 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b4 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b5 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b5 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b6 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b6 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b7 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b7 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b8 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b8 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b9 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b9 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b10 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b10 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b11 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b11 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b12 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b12 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b13 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b13 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b14 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b14 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b15 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b15 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b16 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b16 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b17 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b17 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b18 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b18 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b19 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b19 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b20 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b20 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } clear_variable_list = ecb$number$b1 clear_variable_list = ecb$number$b2 clear_variable_list = ecb$number$b3 clear_variable_list = ecb$number$b4 clear_variable_list = ecb$number$b5 clear_variable_list = ecb$number$b6 clear_variable_list = ecb$number$b7 clear_variable_list = ecb$number$b8 clear_variable_list = ecb$number$b9 clear_variable_list = ecb$number$b10 clear_variable_list = ecb$number$b11 clear_variable_list = ecb$number$b12 clear_variable_list = ecb$number$b13 clear_variable_list = ecb$number$b14 clear_variable_list = ecb$number$b15 clear_variable_list = ecb$number$b16 clear_variable_list = ecb$number$b17 clear_variable_list = ecb$number$b18 clear_variable_list = ecb$number$b19 clear_variable_list = ecb$number$b20 
		} 
		if = {
			limit = {
				$depth$ = 6
			}
			if = { limit = { has_variable_list = ecb$number$a1 } every_in_list = { variable = ecb$number$a1 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b1 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b2 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b13 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b14 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a2 } every_in_list = { variable = ecb$number$a2 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b3 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b4 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b15 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b16 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a3 } every_in_list = { variable = ecb$number$a3 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b5 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b6 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b17 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b18 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a4 } every_in_list = { variable = ecb$number$a4 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b7 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b8 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b19 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b20 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a5 } every_in_list = { variable = ecb$number$a5 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b9 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b10 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b21 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b22 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a6 } every_in_list = { variable = ecb$number$a6 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b11 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b12 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b23 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b24 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$b1 } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b1 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b2 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b2 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b3 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b3 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b4 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b4 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b5 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b5 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b6 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b6 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b7 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b7 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b8 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b8 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b9 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b9 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b10 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b10 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b11 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b11 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b12 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b12 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b13 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b13 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b14 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b14 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b15 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b15 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b16 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b16 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b17 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b17 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b18 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b18 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b19 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b19 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b20 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b20 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b21 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b21 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b22 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b22 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b23 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b23 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b24 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b24 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } clear_variable_list = ecb$number$b1 clear_variable_list = ecb$number$b2 clear_variable_list = ecb$number$b3 clear_variable_list = ecb$number$b4 clear_variable_list = ecb$number$b5 clear_variable_list = ecb$number$b6 clear_variable_list = ecb$number$b7 clear_variable_list = ecb$number$b8 clear_variable_list = ecb$number$b9 clear_variable_list = ecb$number$b10 clear_variable_list = ecb$number$b11 clear_variable_list = ecb$number$b12 clear_variable_list = ecb$number$b13 clear_variable_list = ecb$number$b14 clear_variable_list = ecb$number$b15 clear_variable_list = ecb$number$b16 clear_variable_list = ecb$number$b17 clear_variable_list = ecb$number$b18 clear_variable_list = ecb$number$b19 clear_variable_list = ecb$number$b20 clear_variable_list = ecb$number$b21 clear_variable_list = ecb$number$b22 clear_variable_list = ecb$number$b23 clear_variable_list = ecb$number$b24 
		} 
		if = {
			limit = {
				$depth$ = 7
			}
			if = { limit = { has_variable_list = ecb$number$a1 } every_in_list = { variable = ecb$number$a1 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b1 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b2 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b15 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b16 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a2 } every_in_list = { variable = ecb$number$a2 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b3 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b4 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b17 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b18 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a3 } every_in_list = { variable = ecb$number$a3 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b5 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b6 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b19 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b20 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a4 } every_in_list = { variable = ecb$number$a4 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b7 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b8 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b21 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b22 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a5 } every_in_list = { variable = ecb$number$a5 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b9 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b10 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b23 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b24 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a6 } every_in_list = { variable = ecb$number$a6 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b11 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b12 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b25 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b26 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a7 } every_in_list = { variable = ecb$number$a7 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b13 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b14 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b27 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b28 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$b1 } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b1 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b2 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b2 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b3 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b3 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b4 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b4 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b5 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b5 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b6 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b6 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b7 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b7 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b8 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b8 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b9 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b9 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b10 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b10 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b11 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b11 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b12 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b12 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b13 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b13 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b14 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b14 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b15 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b15 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b16 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b16 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b17 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b17 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b18 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b18 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b19 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b19 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b20 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b20 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b21 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b21 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b22 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b22 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b23 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b23 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b24 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b24 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b25 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b25 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b26 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b26 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b27 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b27 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b28 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b28 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } clear_variable_list = ecb$number$b1 clear_variable_list = ecb$number$b2 clear_variable_list = ecb$number$b3 clear_variable_list = ecb$number$b4 clear_variable_list = ecb$number$b5 clear_variable_list = ecb$number$b6 clear_variable_list = ecb$number$b7 clear_variable_list = ecb$number$b8 clear_variable_list = ecb$number$b9 clear_variable_list = ecb$number$b10 clear_variable_list = ecb$number$b11 clear_variable_list = ecb$number$b12 clear_variable_list = ecb$number$b13 clear_variable_list = ecb$number$b14 clear_variable_list = ecb$number$b15 clear_variable_list = ecb$number$b16 clear_variable_list = ecb$number$b17 clear_variable_list = ecb$number$b18 clear_variable_list = ecb$number$b19 clear_variable_list = ecb$number$b20 clear_variable_list = ecb$number$b21 clear_variable_list = ecb$number$b22 clear_variable_list = ecb$number$b23 clear_variable_list = ecb$number$b24 clear_variable_list = ecb$number$b25 clear_variable_list = ecb$number$b26 clear_variable_list = ecb$number$b27 clear_variable_list = ecb$number$b28 
		} 
		if = {
			limit = {
				$depth$ = 8
			}
			if = { limit = { has_variable_list = ecb$number$a1 } every_in_list = { variable = ecb$number$a1 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b1 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b2 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b17 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b18 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a2 } every_in_list = { variable = ecb$number$a2 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b3 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b4 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b19 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b20 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a3 } every_in_list = { variable = ecb$number$a3 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b5 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b6 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b21 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b22 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a4 } every_in_list = { variable = ecb$number$a4 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b7 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b8 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b23 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b24 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a5 } every_in_list = { variable = ecb$number$a5 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b9 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b10 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b25 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b26 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a6 } every_in_list = { variable = ecb$number$a6 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b11 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b12 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b27 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b28 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a7 } every_in_list = { variable = ecb$number$a7 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b13 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b14 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b29 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b30 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a8 } every_in_list = { variable = ecb$number$a8 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b15 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b16 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b31 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b32 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$b1 } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b1 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b2 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b2 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b3 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b3 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b4 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b4 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b5 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b5 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b6 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b6 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b7 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b7 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b8 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b8 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b9 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b9 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b10 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b10 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b11 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b11 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b12 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b12 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b13 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b13 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b14 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b14 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b15 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b15 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b16 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b16 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b17 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b17 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b18 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b18 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b19 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b19 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b20 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b20 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b21 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b21 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b22 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b22 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b23 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b23 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b24 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b24 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b25 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b25 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b26 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b26 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b27 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b27 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b28 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b28 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b29 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b29 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b30 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b30 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b31 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b31 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b32 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b32 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } clear_variable_list = ecb$number$b1 clear_variable_list = ecb$number$b2 clear_variable_list = ecb$number$b3 clear_variable_list = ecb$number$b4 clear_variable_list = ecb$number$b5 clear_variable_list = ecb$number$b6 clear_variable_list = ecb$number$b7 clear_variable_list = ecb$number$b8 clear_variable_list = ecb$number$b9 clear_variable_list = ecb$number$b10 clear_variable_list = ecb$number$b11 clear_variable_list = ecb$number$b12 clear_variable_list = ecb$number$b13 clear_variable_list = ecb$number$b14 clear_variable_list = ecb$number$b15 clear_variable_list = ecb$number$b16 clear_variable_list = ecb$number$b17 clear_variable_list = ecb$number$b18 clear_variable_list = ecb$number$b19 clear_variable_list = ecb$number$b20 clear_variable_list = ecb$number$b21 clear_variable_list = ecb$number$b22 clear_variable_list = ecb$number$b23 clear_variable_list = ecb$number$b24 clear_variable_list = ecb$number$b25 clear_variable_list = ecb$number$b26 clear_variable_list = ecb$number$b27 clear_variable_list = ecb$number$b28 clear_variable_list = ecb$number$b29 clear_variable_list = ecb$number$b30 clear_variable_list = ecb$number$b31 clear_variable_list = ecb$number$b32 
		} 
		if = {
			limit = {
				$depth$ = 9
			}
			if = { limit = { has_variable_list = ecb$number$a1 } every_in_list = { variable = ecb$number$a1 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b1 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b2 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b19 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b20 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a2 } every_in_list = { variable = ecb$number$a2 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b3 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b4 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b21 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b22 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a3 } every_in_list = { variable = ecb$number$a3 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b5 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b6 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b23 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b24 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a4 } every_in_list = { variable = ecb$number$a4 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b7 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b8 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b25 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b26 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a5 } every_in_list = { variable = ecb$number$a5 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b9 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b10 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b27 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b28 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a6 } every_in_list = { variable = ecb$number$a6 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b11 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b12 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b29 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b30 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a7 } every_in_list = { variable = ecb$number$a7 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b13 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b14 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b31 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b32 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a8 } every_in_list = { variable = ecb$number$a8 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b15 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b16 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b33 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b34 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a9 } every_in_list = { variable = ecb$number$a9 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b17 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b18 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b35 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b36 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$b1 } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b1 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b2 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b2 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b3 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b3 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b4 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b4 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b5 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b5 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b6 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b6 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b7 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b7 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b8 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b8 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b9 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b9 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b10 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b10 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b11 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b11 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b12 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b12 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b13 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b13 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b14 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b14 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b15 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b15 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b16 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b16 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b17 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b17 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b18 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b18 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b19 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b19 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b20 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b20 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b21 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b21 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b22 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b22 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b23 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b23 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b24 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b24 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b25 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b25 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b26 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b26 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b27 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b27 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b28 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b28 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b29 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b29 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b30 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b30 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b31 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b31 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b32 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b32 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b33 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b33 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b34 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b34 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b35 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b35 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b36 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b36 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } clear_variable_list = ecb$number$b1 clear_variable_list = ecb$number$b2 clear_variable_list = ecb$number$b3 clear_variable_list = ecb$number$b4 clear_variable_list = ecb$number$b5 clear_variable_list = ecb$number$b6 clear_variable_list = ecb$number$b7 clear_variable_list = ecb$number$b8 clear_variable_list = ecb$number$b9 clear_variable_list = ecb$number$b10 clear_variable_list = ecb$number$b11 clear_variable_list = ecb$number$b12 clear_variable_list = ecb$number$b13 clear_variable_list = ecb$number$b14 clear_variable_list = ecb$number$b15 clear_variable_list = ecb$number$b16 clear_variable_list = ecb$number$b17 clear_variable_list = ecb$number$b18 clear_variable_list = ecb$number$b19 clear_variable_list = ecb$number$b20 clear_variable_list = ecb$number$b21 clear_variable_list = ecb$number$b22 clear_variable_list = ecb$number$b23 clear_variable_list = ecb$number$b24 clear_variable_list = ecb$number$b25 clear_variable_list = ecb$number$b26 clear_variable_list = ecb$number$b27 clear_variable_list = ecb$number$b28 clear_variable_list = ecb$number$b29 clear_variable_list = ecb$number$b30 clear_variable_list = ecb$number$b31 clear_variable_list = ecb$number$b32 clear_variable_list = ecb$number$b33 clear_variable_list = ecb$number$b34 clear_variable_list = ecb$number$b35 clear_variable_list = ecb$number$b36 
		} 
		if = {
			limit = {
				$depth$ = 10
			}
			if = { limit = { has_variable_list = ecb$number$a1 } every_in_list = { variable = ecb$number$a1 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b1 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b2 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b21 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b22 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a2 } every_in_list = { variable = ecb$number$a2 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b3 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b4 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b23 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b24 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a3 } every_in_list = { variable = ecb$number$a3 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b5 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b6 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b25 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b26 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a4 } every_in_list = { variable = ecb$number$a4 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b7 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b8 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b27 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b28 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a5 } every_in_list = { variable = ecb$number$a5 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b9 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b10 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b29 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b30 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a6 } every_in_list = { variable = ecb$number$a6 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b11 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b12 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b31 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b32 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a7 } every_in_list = { variable = ecb$number$a7 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b13 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b14 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b33 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b34 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a8 } every_in_list = { variable = ecb$number$a8 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b15 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b16 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b35 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b36 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a9 } every_in_list = { variable = ecb$number$a9 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b17 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b18 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b37 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b38 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$a10 } every_in_list = { variable = ecb$number$a10 if = { limit = { is_incorporated = yes ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b19 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = yes } root = { add_to_variable_list = { name = ecb$number$b20 target = prev } } } else_if = { limit = { is_incorporated = yes ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b39 target = prev } } } else_if = { limit = { is_incorporated = no ec_has_enough_workforce = no } root = { add_to_variable_list = { name = ecb$number$b40 target = prev } } } } } if = { limit = { has_variable_list = ecb$number$b1 } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b1 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b2 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b2 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b3 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b3 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b4 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b4 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b5 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b5 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b6 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b6 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b7 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b7 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b8 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b8 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b9 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b9 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b10 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b10 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b11 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b11 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b12 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b12 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b13 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b13 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b14 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b14 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b15 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b15 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b16 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b16 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b17 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b17 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b18 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b18 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b19 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b19 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b20 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b20 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b21 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b21 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b22 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b22 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b23 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b23 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b24 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b24 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b25 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b25 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b26 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b26 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b27 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b27 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b28 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b28 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b29 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b29 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b30 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b30 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b31 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b31 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b32 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b32 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b33 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b33 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b34 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b34 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b35 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b35 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b36 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b36 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b37 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b37 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b38 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b38 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b39 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b39 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } if = { limit = { has_variable_list = ecb$number$b40 ec_check_if_counter_is_within_limit = { counter = $counter$ factor = $factor$ priority = var:ecpb$number$ } } ec_start_building_construction = { building = $building$ number = $number$ states = ecb$number$b40 workforce = $workforce$ importance = $importance$ arable = $arable$ counter = $counter$ factor = $factor$ scaling = $scaling$ singular = $singular$ cooldown = $cooldown$ } } clear_variable_list = ecb$number$b1 clear_variable_list = ecb$number$b2 clear_variable_list = ecb$number$b3 clear_variable_list = ecb$number$b4 clear_variable_list = ecb$number$b5 clear_variable_list = ecb$number$b6 clear_variable_list = ecb$number$b7 clear_variable_list = ecb$number$b8 clear_variable_list = ecb$number$b9 clear_variable_list = ecb$number$b10 clear_variable_list = ecb$number$b11 clear_variable_list = ecb$number$b12 clear_variable_list = ecb$number$b13 clear_variable_list = ecb$number$b14 clear_variable_list = ecb$number$b15 clear_variable_list = ecb$number$b16 clear_variable_list = ecb$number$b17 clear_variable_list = ecb$number$b18 clear_variable_list = ecb$number$b19 clear_variable_list = ecb$number$b20 clear_variable_list = ecb$number$b21 clear_variable_list = ecb$number$b22 clear_variable_list = ecb$number$b23 clear_variable_list = ecb$number$b24 clear_variable_list = ecb$number$b25 clear_variable_list = ecb$number$b26 clear_variable_list = ecb$number$b27 clear_variable_list = ecb$number$b28 clear_variable_list = ecb$number$b29 clear_variable_list = ecb$number$b30 clear_variable_list = ecb$number$b31 clear_variable_list = ecb$number$b32 clear_variable_list = ecb$number$b33 clear_variable_list = ecb$number$b34 clear_variable_list = ecb$number$b35 clear_variable_list = ecb$number$b36 clear_variable_list = ecb$number$b37 clear_variable_list = ecb$number$b38 clear_variable_list = ecb$number$b39 clear_variable_list = ecb$number$b40 
		} 
	}
}

ec_start_building_construction = {
	every_in_list = {
		variable = $states$
		limit = {
			OR = {
				$workforce$ = 0
				root.var:ecpb$number$ <= $importance$
				ec_available_workforce >= ec_required_workforce
			}
			OR = {
				$arable$ = 0
				AND = {
					free_arable_land > 0
					OR = {
						NOT = {
							has_variable = ecqab
						}
						var:ecqab < free_arable_land
					}
				}
			}
		}
		root = {
			add_to_variable_list = {
				name = eccsa
				target = prev
			}
		}
		if = {
			limit = {
				OR = {
					NOT = {
						has_building = $building$
					}
					any_scope_building = {
						is_building_type = $building$
						level <= 0
						is_under_construction = no
					}
				}
			}
			set_variable = {
				name = ecsbo
				value = 0
			}
		}
		else = {
			save_scope_as = ec_current_state
			random_scope_building = {
				limit = {
					is_building_type = $building$
				}
				if = {
					limit = {
						level <= 0
						is_under_construction = yes
					}
					scope:ec_current_state = {
						set_variable = {
							name = ecsbo
							value = 1
						}
					}
				}
				else = {
					scope:ec_current_state = {
						set_variable = {
							name = ecsbo
							value = {
								value = prev.level
								min = 1
							}
						}
						change_variable = {
							name = ecsbo
							multiply = {
								value = prev.occupancy
								min = 0
								max = 1
							}
						}
					}
				}
			}
			clear_saved_scope = ec_current_state
		}
	}
	while = {
		limit = {
			has_variable_list = eccsa
			variable_list_size = {
				name = eccsa
				value > 0
			}
			ec_check_if_counter_is_within_limit = {
				counter = $counter$
				factor = $factor$
				priority = var:ecpb$number$
			}
		}
		random_in_list = {
			variable = eccsa
			limit = {
				save_temporary_scope_as = ec_current_state
				OR = {
					AND = {
						$scaling$ = 0
						root = {
							NOT = {
								any_in_list = {
									variable = eccsa
									var:ecsbo < ec_current_ecsbo
								}
							}
							OR = {
								ec_current_ecsbo > 0
								any_in_list = {
									variable = eccsa
									var:ecsbo = 0
									ec_available_workforce > scope:ec_current_state.ec_available_workforce
									count < 2
								}
							}
						}
					}
					AND = {
						$scaling$ = 1
						root = {
							any_in_list = {
								variable = eccsa
								var:ecsbo > ec_current_ecsbo
								count < ec_simultaneously_developed
							}
							OR = {
								ec_current_ecsbo > 0
								any_in_list = {
									variable = eccsa
									var:ecsbo = 0
									ec_available_workforce > scope:ec_current_state.ec_available_workforce
									count < 2
								}
							}
						}
					}
				}
			}
			if = {
				limit = {
					$singular$ = 0
				}
				set_variable = {
					name = ecnqc
					value = root.num_queued_constructions
				}
			}
			start_building_construction = $building$
			if = {
				limit = {
					$cooldown$ = 1
				}
				root = {
					gb_renew_variable = {
						name = ec_$building$_cooldown
						days = 98
					}
				}
			}
			if = {
				limit = {
					$singular$ = 0
				}
				if = {
					limit = {
						var:ecnqc < root.num_queued_constructions
					}
					root = {
						change_variable = {
							name = eccb$counter$
							add = 1
						}
					}
					if = {
						limit = {
							NOT = {
								has_variable = ecaqb
							}
						}
						set_variable = {
							name = ecaqb
							value = 1
						}
					}
					else = {
						change_variable = {
							name = ecaqb
							add = 1
						}
					}
					if = {
						limit = {
							$arable$ = 1
						}
						if = {
							limit = {
								NOT = {
									has_variable = ecqab
								}
							}
							set_variable = {
								name = ecqab
								value = 1
							}
						}
						else = {
							change_variable = {
								name = ecqab
								add = 1
							}
						}
					}
					if = {
						limit = {
							OR = {
								NOR = {
									$workforce$ = 0
									root.var:ecpb$number$ <= $importance$
									ec_available_workforce >= ec_required_workforce
								}
								NOR = {
									$arable$ = 0
									AND = {
										free_arable_land > 0
										OR = {
											NOT = {
												has_variable = ecqab
											}
											var:ecqab < free_arable_land
										}
									}
								}
							}
						}
						remove_variable = ecsbo
						root = {
							remove_list_variable = {
								name = eccsa
								target = prev
							}
						}
					}
					else = {
						change_variable = {
							name = ecsbo
							add = 1
						}
					}
				}
				else = {
					remove_variable = ecsbo
					root = {
						remove_list_variable = {
							name = eccsa
							target = prev
						}
					}
				}
				remove_variable = ecnqc
			}
			else = {
				root = {
					change_variable = {
						name = eccb$counter$
						add = 1
					}
				}
				remove_variable = ecsbo
				root = {
					remove_list_variable = {
						name = eccsa
						target = prev
					}
				}
			}
		}
	}
	every_in_list = {
		variable = eccsa
		remove_variable = ecsbo
	}
	clear_variable_list = eccsa
}

ec_clear_technical_variables = {
	clear_variable_list = ecpa1
	clear_variable_list = ecpa2
	clear_variable_list = ecpa3
	clear_variable_list = ecpa4
	clear_variable_list = ecpa5
	clear_variable_list = ecpa6
	clear_variable_list = ecpa7
	clear_variable_list = ecpa8
	clear_variable_list = ecpa9
	clear_variable_list = ecpa10
	clear_variable_list = ecpa11
	clear_variable_list = ecpa12
	clear_variable_list = ecpa13
	clear_variable_list = ecpa14
	clear_variable_list = ecpa15
	clear_variable_list = ecpa16
	clear_variable_list = ecpa17
	clear_variable_list = ecpa18
	ec_clear_building_technicals = { number = 1 }
	ec_clear_building_technicals = { number = 2 }
	ec_clear_building_technicals = { number = 3 }
	ec_clear_building_technicals = { number = 4 }
	ec_clear_building_technicals = { number = 5 }
	ec_clear_building_technicals = { number = 6 }
	ec_clear_building_technicals = { number = 7 }
	ec_clear_building_technicals = { number = 8 }
	ec_clear_building_technicals = { number = 9 }
	ec_clear_building_technicals = { number = 10 }
	ec_clear_building_technicals = { number = 11 }
	ec_clear_building_technicals = { number = 12 }
	ec_clear_building_technicals = { number = 13 }
	ec_clear_building_technicals = { number = 14 }
	ec_clear_building_technicals = { number = 15 }
	ec_clear_building_technicals = { number = 16 }
	ec_clear_building_technicals = { number = 17 }
	ec_clear_building_technicals = { number = 18 }
	ec_clear_building_technicals = { number = 19 }
	ec_clear_building_technicals = { number = 20 }
	ec_clear_building_technicals = { number = 21 }
	ec_clear_building_technicals = { number = 22 }
	ec_clear_building_technicals = { number = 23 }
	ec_clear_building_technicals = { number = 24 }
	ec_clear_building_technicals = { number = 25 }
	ec_clear_building_technicals = { number = 26 }
	ec_clear_building_technicals = { number = 27 }
	ec_clear_building_technicals = { number = 28 }
	ec_clear_building_technicals = { number = 29 }
	ec_clear_building_technicals = { number = 30 }
	ec_clear_building_technicals = { number = 31 }
	ec_clear_building_technicals = { number = 32 }
	ec_clear_building_technicals = { number = 33 }
	ec_clear_building_technicals = { number = 34 }
	ec_clear_building_technicals = { number = 35 }
	ec_clear_building_technicals = { number = 36 }
	ec_clear_building_technicals = { number = 37 }
	ec_clear_building_technicals = { number = 38 }
	ec_clear_building_technicals = { number = 39 }
	ec_clear_building_technicals = { number = 40 }
	ec_clear_building_technicals = { number = 41 }
	ec_clear_building_technicals = { number = 42 }
	ec_clear_building_technicals = { number = 43 }
	ec_clear_building_technicals = { number = 44 }
	ec_clear_building_technicals = { number = 45 }
	ec_clear_building_technicals = { number = 46 }
	ec_clear_building_technicals = { number = 47 }
	ec_clear_building_technicals = { number = 48 }
	ec_clear_building_technicals = { number = 49 }
	cp_clear_technical_variables = yes
}

ec_clear_building_technicals = {
	remove_variable = ecpb$number$
	remove_variable = eccb$number$
	clear_variable_list = ecb$number$a1
	clear_variable_list = ecb$number$a2
	clear_variable_list = ecb$number$a3
	clear_variable_list = ecb$number$a4
	clear_variable_list = ecb$number$a5
	clear_variable_list = ecb$number$a6
	clear_variable_list = ecb$number$a7
	clear_variable_list = ecb$number$a8
	clear_variable_list = ecb$number$a9
	clear_variable_list = ecb$number$a10
}